import{aL as v,$ as E,cG as z,cH as d,cI as ee,aa as R,ab as m,cJ as G,cK as Q,ag as N,cL as W,cM as Y,cN as Z,cO as l,cP as b}from"./index-ni2rzWLC.js";function $(n,g){if(!Array.isArray(n)||n.length<g)return!1;for(const c of n)if(typeof c!="number")return!1;return!0}const L=7645211,te={xmin:-180,ymin:-90,zmin:-450,xmax:180,ymax:90,zmax:8850},ne=new Map([[5773,new b({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"EGM96_Geoid"})],[3855,new b({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"EGM2008_Geoid"})],[115700,new b({heightModel:"ellipsoidal",heightUnit:"meters",vertCRS:"WGS_1984"})],[115701,new b({heightModel:"ellipsoidal",heightUnit:"meters",vertCRS:"ETRS_1989"})],[6360,new b({heightModel:"gravity-related-height",heightUnit:"us-feet",vertCRS:"NAVD88_height_(ftUS)"})],[7837,new b({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"DHHN2016_(height) "})]]);function se(n){if(!n)return null;const g=n.vcsWkid||n.latestVcsWkid;return g?ne.get(g):null}function ie(n){var g,c,r,_,x,f,w,p,M,y,A,V,I,U;return!(!((c=(g=n.extensions)==null?void 0:g.ESRI_crs)!=null&&c.wkid||(_=(r=n.extensions)==null?void 0:r.ESRI_crs)!=null&&_.latestWkid||(f=(x=n.extensions)==null?void 0:x.ESRI_crs)!=null&&f.wkt)||!((y=(M=(p=(w=n.root)==null?void 0:w.extensions)==null?void 0:p.ESRI_crs)==null?void 0:M.boundingVolume)!=null&&y.box)&&!((U=(I=(V=(A=n.root)==null?void 0:A.extensions)==null?void 0:V.ESRI_crs)==null?void 0:I.boundingVolume)!=null&&U.sphere))}function oe(n,g=!1){var w,p,M,y,A,V,I,U,C,X,H,D,q,J,K,O,P,T,j,B,F;let c=new v({wkid:4326,vcsWkid:115700}),r=(w=n.root)==null?void 0:w.boundingVolume,_=!1,x=(p=n==null?void 0:n.root)==null?void 0:p.transform;if(g&&((y=(M=n.extensions)==null?void 0:M.ESRI_crs)!=null&&y.wkid||(V=(A=n.extensions)==null?void 0:A.ESRI_crs)!=null&&V.latestWkid||(U=(I=n.extensions)==null?void 0:I.ESRI_crs)!=null&&U.wkt)&&((D=(H=(X=(C=n.root)==null?void 0:C.extensions)==null?void 0:X.ESRI_crs)==null?void 0:H.boundingVolume)!=null&&D.box||(O=(K=(J=(q=n.root)==null?void 0:q.extensions)==null?void 0:J.ESRI_crs)==null?void 0:K.boundingVolume)!=null&&O.sphere))c=new v((P=n.extensions)==null?void 0:P.ESRI_crs),r=(B=(j=(T=n.root)==null?void 0:T.extensions)==null?void 0:j.ESRI_crs)==null?void 0:B.boundingVolume,x=(F=n.root)==null?void 0:F.transform,_=!0;else if(!r)return new E(-180,-90,180,90,c);if(r.box){const t=r==null?void 0:r.box;if(t[3]>L&&t[7]>L&&t[11]>L)return new E({...te,spatialReference:c})}const f=R();if(!_&&r.region&&$(r.region,6)){const t=r.region,a=z(t[0]),o=z(t[1]),s=t[4],i=z(t[2]),e=z(t[3]),h=t[5];return new E({xmin:a,ymin:o,zmin:s,xmax:i,ymax:e,zmax:h,spatialReference:c})}if(r.sphere&&$(r.sphere,4)){const t=r.sphere,a=d(t[0],t[1],t[2]),o=t[3]/Math.sqrt(3),s=R();ee(s,a,d(o,o,o));const i=R();if(m(i,a,d(o,o,o)),x&&$(x,16)){const S=x;G(f,s,S),Q(s,f),G(f,i,S),Q(i,f)}_||(N(s,W,0,s,v.WGS84,0),N(i,W,0,i,v.WGS84,0));const e=R(),h=R();return Y(e,s,i),Z(h,s,i),new E({xmin:e[0],ymin:e[1],zmin:e[2],xmax:h[0],ymax:h[1],zmax:h[2],spatialReference:c})}if(r.box&&$(r.box,12)){const t=r.box,a=d(t[0],t[1],t[2]),o=d(t[3],t[4],t[5]),s=d(t[6],t[7],t[8]),i=d(t[9],t[10],t[11]),e=[];for(let u=0;u<8;++u)e.push(R());if(m(e[0],a,o),m(e[0],e[0],s),m(e[0],e[0],i),l(e[1],a,o),m(e[1],e[1],s),m(e[1],e[1],i),m(e[2],a,o),l(e[2],e[2],s),m(e[2],e[2],i),l(e[3],a,o),l(e[3],e[3],s),m(e[3],e[3],i),m(e[4],a,o),m(e[4],e[4],s),l(e[4],e[4],i),l(e[5],a,o),m(e[5],e[5],s),l(e[5],e[5],i),m(e[6],a,o),l(e[6],e[6],s),l(e[6],e[6],i),l(e[7],a,o),l(e[7],e[7],s),l(e[7],e[7],i),x&&$(x,16)){const u=x;for(let k=0;k<8;++k)G(e[k],e[k],u)}const h=d(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),S=d(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(let u=0;u<8;++u)_||N(e[u],W,0,e[u],v.WGS84,0),Y(S,S,e[u]),Z(h,h,e[u]);return new E({xmin:S[0],ymin:S[1],zmin:S[2],xmax:h[0],ymax:h[1],zmax:h[2],spatialReference:c})}return new E(-180,-90,180,90,c)}export{oe as E,ie as R,se as _};
