const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CG5kgmiA.js","assets/index-BKTKGLs8.css"])))=>i.map(i=>d[i]);
import{l as h,lv as L,b5 as R,c as k,iN as z}from"./index-CG5kgmiA.js";import{L as u,M as O,N as C}from"./utils-DM9qbpow.js";import"./mat2df32-Dpt2CT5P.js";import"./mat2d-lnUG-FB1.js";const g=h("android");h("chrome")||g&&g>=4;L();function f(a){return a&&a.opacity!==void 0?a.opacity*("parent"in a?f(a.parent):1):1}async function j(a,e){var m;if(!a)return;const y=a.sourceLayer,t=(e!=null&&e.useSourceLayer?y:a.layer)??y,s=e!=null&&e.ignoreOpacity?1:f(t);if(a.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){const r=a.symbol.type==="web-style"?await a.symbol.fetchSymbol({...e,acceptedFormats:e==null?void 0:e.webStyleAcceptedFormats,cache:e==null?void 0:e.webStyleCache}):a.symbol.clone();return u(r,null,{add:s}),r}const o=(e==null?void 0:e.renderer)??q(t);let i=o&&"getSymbolAsync"in o?await o.getSymbolAsync(a,e):null;if(!i)return;if(i=i.type==="web-style"?await i.fetchSymbol({...e,acceptedFormats:e==null?void 0:e.webStyleAcceptedFormats,cache:e==null?void 0:e.webStyleCache}):i.clone(),!(o&&"visualVariables"in o&&((m=o.visualVariables)!=null&&m.length)&&E(i)))return u(i,null,{add:s}),i;if("arcadeRequiredForVisualVariables"in o&&o.arcadeRequiredForVisualVariables&&(e==null?void 0:e.arcade)==null){const r={...e};r.arcade=await R(),e=r}const{getColor:w,getOpacity:S,getAllSizes:v,getRotationAngle:V}=await k(()=>import("./index-CG5kgmiA.js").then(r=>r.E5),__vite__mapDeps([0,1])),l=[],n=[],c=[],b=[];for(const r of o.visualVariables)switch(r.type){case"color":l.push(r);break;case"opacity":n.push(r);break;case"rotation":b.push(r);break;case"size":r.target||c.push(r)}const d=!!l.length&&l[l.length-1],A=d?w(d,a,e):null,F=!!(e!=null&&e.ignoreOpacity),p=!!n.length&&n[n.length-1],_=p?S(p,a,e):null;if(u(i,A,F?void 0:{override:_,add:s}),c.length&&(e==null?void 0:e.ignoreSizeVariables)!==!0){const r=v(c,a,e);await O(i,r)}if((e==null?void 0:e.ignoreRotationVariables)!==!0)for(const r of b)C(i,V(r,a,e),r.axis);return i}function E(a){var e;return!z(a)||((e=a.symbolLayers.at(0))==null?void 0:e.type)!=="water"}function q(a){if(a)return"renderer"in a?a.renderer:void 0}export{j as F};
