import{k as Oe,ks as oe,nc as Te,nd as je,aa as O,cO as be,dz as Ue,ne as Pe,kA as He,nf as Se,ng as Ee,l as G,a as F,ds as Fe,nh as Re,K as le,g as Ve,ni as Ae,u as ke,ar as Ie,na as Be,ft as $e,kG as ce,nj as De,t as Le,nk as Ge,eW as Ne,iT as ze,f0 as We,nl as qe,jN as Je,dm as de,nm as Xe,nn as N,eZ as Ze,no as Ke,np as Ye,ji as Qe,nq as z,nr as he,ns as et,nt as tt,cr as st,a5 as it,lA as at,mv as rt,mA as nt,mB as ot,jJ as W,mD as lt,mE as ct,iG as k,nu as dt,nv as ht,nw as ue,nx as me,ax as pe,ny as ut,go as mt,nz as pt,i_ as ft,ab as gt,dZ as fe,_ as T,m as S,b as yt}from"./index-gvPOfpe8.js";import{E as bt,i as _t,t as wt,a as vt}from"./Transform-DQxMpMUS.js";import{y as xt}from"./SceneModification-DVRrwNmq.js";import{u as Mt}from"./I3SMeshWorkerHandle-ys0OoDqm.js";import{l as Ct}from"./LayerView3D-MdDXa7s2.js";import{s as Ot,t as Tt}from"./EllipsoidMode-BY1pQiG2.js";import{d as jt}from"./LayerView-DiMFVtue.js";import"./projectBoundingSphere-Gcwl6VjA.js";class Ut extends Oe{constructor(t,r,n,o,h,l,i){super(t,0,0,0,r),this.nodesCached=n,this.vboMB=o,this.textureMB=h,this.vboMBCached=l,this.textureMBCached=i}}const Pt={Points:null,Lines:null,LineStrip:null,Triangles:oe.TRIANGLES,TriangleStrip:oe.TRIANGLE_STRIP,NotSet:null},ge={Opaque:1,Mask:2,Blend:0},Ht={Back:2,Front:1,None:0,NotSet:2},St={WrapYBit:{s:33071,t:10497},WrapXBit:{s:10497,t:33071},WrapXy:{s:10497,t:10497},None:{s:33071,t:33071},NotSet:{s:33071,t:33071}},Et={U8:1,I8:1,U16:2,I16:2,U32:4,I32:4,F32:4,F64:8,Utf8String:1,NotSet:1};class Ft{constructor(t){this.layerView=t,this.type=8,this.slicePlaneEnabled=!1,this.isGround=!0,this.layerViewUid=t.uid}intersect(t,r,n,o,h,l){if(t.options.filteredLayerViewUids.includes(this.layerView.uid))return;const{results:i,tolerance:y}=t,g=t.options.store===2,{componentObjectCollection:b}=this.layerView.view.stage.renderView,u=new Te(y,l,t.options.normalRequired),c=je(n,o,Rt),s=be(O(),o,n),d=Ue(O(),s),p=(v,m,w)=>{if(m>=0){if(r!=null&&!r(n,o,m))return;const _=M=>{const f=new Se(this.layerView.layer.uid);M.set(this.type,f,m,w)};if(this.isGround&&(i.ground.distance==null||m<i.ground.distance)&&_(i.ground),t.options.isFiltered)return;if((i.min.distance==null||m<i.min.distance)&&_(i.min),(i.max.distance==null||m>i.max.distance)&&_(i.max),g){const M=new He(t.ray);_(M),t.results.all.push(M)}}};this.layerView.forEachVisibleTile(v=>{if(!v.boundingVolumeIntersectsRay(n,d))return;const{componentObjects:m}=v;for(const w of m)Pe(w.aabbInWorldCoordinates,n,c,0)&&b.intersect(w,n,o,null,u,p)})}}const Rt=O();class Vt{constructor(t,r,n,o,h,l,i){this.handle=t,this.componentObjects=r,this.textures=n,this.cpuMemoryUsage=o,this.vboMemoryUsage=h,this.textureMemoryUsage=l,this.obb=i,this.isVisible=!1,this.usedMemory=this.textureMemoryUsage+this.vboMemoryUsage+this.cpuMemoryUsage;const y=O();i==null||i.getCenter(y),this._obbCenter=y,this._obbRadiusSquared=i?(i==null?void 0:i.radius)**2:0}boundingVolumeIntersectsRay(t,r){if(!this.obb)return!0;const n=be(At,this._obbCenter,t),o=fe(n,r);return fe(n,n)-o*o<=this._obbRadiusSquared&&this.obb.intersectRay(t,r)}}const At=O();function I(e){return Math.round(e/1048.576)/1e3}let C=class extends Ct(jt){get hasModifications(){return this._modifications&&this._modifications.length>0}constructor(e){super(e),this.type="integrated-mesh-3dtiles",this._compressionTracker=new Ee,this._modifications=new Array,this._visibleGeometryChangedSchedulerHandle=null,this._wasmLayerId=-1,this.ignoresMemoryFactor=!1,this._usedMemory=0,this._cacheMemory=0,this.drapeTargetType=1,this._applySSAO=!G("disable-feature:im-ssao"),this._shadeNormals=!!G("enable-feature:im-shading"),this._lyrHandleToObjects=new Map,this._visibleObjects=new Set,this._initialCullFace=new Map,this._suspendedHandle=null,this._dbgFlags=new Set,this._memCache=e.view.resourceController.memoryController.newCache(`IM3DTiles-${this.uid}`,t=>this._deletePerObjectData(t))}initialize(){var r;this._dbgFlags.add(3),this._dbg(2,"Tiles3DLayerView3D initialize() called");const{view:e}=this;if(this._updatingHandles.add(()=>this.layer.modifications,()=>this._loadModifications(),F),!this._canProjectWithoutEngine())throw Fe("layer",this.layer.spatialReference.wkid,(r=e.renderSpatialReference)==null?void 0:r.wkid);const t=Re(this).then(n=>{this._wasmLayerId=n,this._intersectionHandler=new Ft(this),e.sceneIntersectionHelper.addIntersectionHandler(this._intersectionHandler),this._updatingHandles.add(()=>this.slicePlaneEnabled,o=>this._slicePlaneEnabledChange(o)),this._updatingHandles.add(()=>this._modifications,()=>this._modificationsChanged(),F),this._updatingHandles.add(()=>this.fullOpacity,()=>this._opacityChange()),this._updatingHandles.add(()=>e.clippingArea,()=>this._clippingAreaChanged(),F),this._elevationProvider=new bt({view:e,layerElevationSource:this,intersectionHandler:this._intersectionHandler}),e.elevationProvider.register(1,this._elevationProvider),e.overlayManager.registerDrapeTarget(this),this.addHandles([le(()=>this.layer.elevationInfo,o=>this._elevationInfoChanged(o))]),this._suspendedHandle=le(()=>this.suspended,o=>{var h;return(h=this._wasm)==null?void 0:h.setEnabled(this,!o)},F)});this.addResolvingPromise(t),this._replacesTerrain&&this.addHandles(Ve(()=>this.view.map.ground.opacity,()=>{this._opacityChange()}))}get _replacesTerrain(){var e;return this.layer.replacesTerrain&&!!((e=this.view.map.basemap)!=null&&e.groundLayers.includes(this.layer))}get fullOpacity(){return this._replacesTerrain?this.view.map.ground.opacity:1}get opacity(){return 1}_opacityChange(){const{fullOpacity:e}=this;this.forEachComponentObject(t=>{this._collection.getMaterial(t).objectOpacity=e})}intersect(e,t,r,n){this._intersectionHandler.intersect(e,t,r,n,null,!1)}get ready(){return!0}destroy(){this._dbg(2,"Tiles3DLayerView3D destroy() called"),Ae(this),this._suspendedHandle&&(this._suspendedHandle.remove(),this._suspendedHandle=null),this._intersectionHandler&&(this.view.sceneIntersectionHelper.removeIntersectionHandler(this._intersectionHandler),this._intersectionHandler=null),this._elevationProvider&&(this._elevationProvider.notifyObjectsChangedFunctional(e=>this.forEachComponentObject(t=>e(t.obb))),this.view.elevationProvider.unregister(this._elevationProvider),this._elevationProvider=null),this.view.overlayManager.unregisterDrapeTarget(this),this._lyrHandleToObjects.forEach(e=>this.freeObject(e)),this._lyrHandleToObjects.clear(),this._initialCullFace.clear(),this._visibleObjects.clear(),this._usedMemory=0,this._cacheMemory=0,this._memCache.destroy(),this._updatingHandles=ke(this._updatingHandles),this.emit("visible-geometry-changed"),this._visibleGeometryChangedSchedulerHandle&&(this._visibleGeometryChangedSchedulerHandle.remove(),this._visibleGeometryChangedSchedulerHandle=null)}_modificationsChanged(){var r;const e=this.layer.spatialReference,t=Mt(this._layerClippingArea,this._modifications,e);(r=this._wasm)==null||r.setMeshModifications(this,t,e.wkid)}_clippingAreaChanged(){const e=this.layer.spatialReference,t=Ie();this._layerClippingArea=Be(this.view.clippingArea,t,e)?t:null,this._modificationsChanged()}_visibleGeometryChanged(){this._visibleGeometryChangedSchedulerHandle??(this._visibleGeometryChangedSchedulerHandle=$e(()=>{this.emit("visible-geometry-changed"),this._visibleGeometryChangedSchedulerHandle=null}))}_slicePlaneEnabledChange(e){this._intersectionHandler&&(this._intersectionHandler.slicePlaneEnabled=e),this.forEachComponentObject(t=>{const r=this._collection.getMaterial(t);r.commonMaterialParameters.hasSlicePlane=e,r.commonMaterialParameters.cullFace=e?0:this._initialCullFace.get(t)})}_elevationInfoChanged(e){var t;(t=this._wasm)==null||t.setLayerOffset(this,ce(e))}get _wasm(){return De(this.view)}get wasmLayerId(){return this._wasmLayerId}get usedMemory(){return this._usedMemory}get unloadedMemory(){return 0}get cachedMemory(){return this._cacheMemory}get visibleAtCurrentScale(){return Le(this.layer.effectiveScaleRange,this.view.scale)}get performanceInfo(){let e=0,t=0,r=0,n=0,o=0,h=0;return this._lyrHandleToObjects.forEach(l=>{l.isVisible?(e+=l.textureMemoryUsage,t+=l.vboMemoryUsage,o++):(r+=l.textureMemoryUsage,n+=l.vboMemoryUsage,h++)}),new Ut(this.usedMemory,o,h,I(t),I(e),I(n),I(r))}_canProjectWithoutEngine(){var e,t;if(this.view.state.viewingMode===2){const r=(e=this.view.renderSpatialReference)!=null&&e.isWebMercator?3857:((t=this.view.renderSpatialReference)==null?void 0:t.wkid)??-1;if(r!==3857&&r!==32662)return!1}return!0}get _stage(){return this.view.stage}get _collection(){return this._stage.renderView.componentObjectCollection}get elevationProvider(){return this._elevationProvider}get elevationOffset(){return ce(this.layer.elevationInfo)}get elevationRange(){const e=this.fullExtent;return e!=null&&e.zmin&&(e!=null&&e.zmax)?new Ge(e.zmin,e.zmax):null}getElevationRange(e){return null}get fullExtent(){return this.layer.fullExtent}forEachComponentObject(e){this._forEachObject(this._lyrHandleToObjects.values(),e)}forEachVisibleTile(e){for(const t of this._visibleObjects)e(t)}forEachVisibleComponentObject(e){this._forEachObject(this._visibleObjects,e)}_forEachObject(e,t){for(const r of e)for(const n of r.componentObjects)t(n)}isUpdating(){const e=this._wasm;return!(this._wasmLayerId<0||e==null)&&(e.isUpdating(this._wasmLayerId)||this._compressionTracker.compressing)}updatingFlagChanged(){this.notifyChange("updating")}async createRenderable(e){var w;const t=e.meshData;if(t.data==null)throw new Error("meshData.data undefined");if(t.desc=JSON.parse(t.desc),t.desc==null)throw new Error("meshData.desc undefined");const r=Ne(t.desc.origin),n=new Array,o=this.view.basemapTerrain.spatialReference;let h,l;if(this.view.viewingMode==="global"){const _=We();ze(qe,r,_,o),h=Je(de(),_),l=Xe(de(),h)}else h=N,l=N;const i=Ze(r),y=O(),g=It(t.desc.obb);let b=0,u=0;const c={textureMemoryUsage:0},s=new Array,d=new Map,p=t.desc.prims.length;for(let _=0;_<p;_++){const M=t.desc.prims[_];if(this._dbg(2,JSON.stringify(M)),Pt[M.ptype]==null||t.data==null){this._dbg(2,"[Unsupported Feature] Unsupported primitive mode ("+M.ptype+"). Skipping primitive.");continue}const f=(w=t.desc)!=null&&w.materials&&M.materialId!=null?t.desc.materials[M.materialId]:null,_e=f!=null?f.lightingModel:"Unlit",{positionView:j,positionAttr:U,normalsView:we,normalsAttr:B,colorAttr:R,texCoord0Attr:V,indicesView:E}=this.getBufferViews(M,t.data.buffer,h);if(U==null||j==null||E==null)continue;const q=new Ke(R!=null,V?1:0,we!=null,this._shadeNormals||this._replacesTerrain,this._applySSAO),ve=U.data.length/U.size,$=(x,a)=>!x||x.data.length/x.size===ve||(this._dbg(3,`${a} !== numPos. Skipping primitive.`),!1);if(!$(V,"numTexcoord")||!$(R,"numColors")||!$(B,"normals"))continue;const J=Ye(q),xe=(g==null?void 0:g.clone())??kt(U,r);if(h!==N)for(let x=0;x<j.count;x++)j.getVec(x,y),Qe(y,y,h),j.setVec(x,y);const P=J.createBuffer(U.data.length);if(z("position",U,null,null,P,0),V!=null){const x=P.getField("uv0",he);et(V,x,0)}R!=null&&z("color",R,null,null,P,0),B!=null&&z("normalCompressed",B,null,null,P,0);const Me=new Uint32Array([0,E.typedBuffer.length]),Ce=new tt({data:P.buffer,count:P.byteLength/J.stride,layoutParameters:q},{positions:j.typedBuffer,indices:E.typedBuffer},E.typedBuffer,Me);b+=j.count+E.count;const X=this.view.renderSpatialReference,D=O(),L=[1,1,1];_t(i,X,L,o)||this._dbg(3,"Unsupported coordinate system for IM overlay"),st(i,X,D,o);const A=this._collection.createObject(new wt(it(D[0],D[1],L[0],L[1]),new vt(i,l),xe,Ce,!1));if(f){const x=a=>{a.baseColor=f.baseColorFactor,a.usePBR=_e==="Pbr",a.hasParametersFromSource=!1,a.baseColorTexture=this._getTexture(f.baseColorTex,t,d,c),a.usePBR&&(a.mrrFactors=[f.metallicFactor,f.roughnessFactor,0],a.emissiveBaseColor=f.emissiveFactor??[0,0,0],a.metallicRoughnessTexture=this._getTexture(f.metalTex,t,d,c),a.emissionTexture=this._getTexture(f.emissiveTex,t,d,c),a.occlusionTexture=this._getTexture(f.occlusionTex,t,d,c),a.normalTexture=this._getTexture(f.normalTex,t,d,c)),a.objectOpacity=0,a.alphaDiscardMode=2;const H=[];a.baseColorTexture&&H.push(a.baseColorTexture.loadPromise),a.usePBR&&(a.metallicRoughnessTexture&&H.push(a.metallicRoughnessTexture.loadPromise),a.emissionTexture&&H.push(a.emissionTexture.loadPromise),a.occlusionTexture&&H.push(a.occlusionTexture.loadPromise),a.normalTexture&&H.push(a.normalTexture.loadPromise));const Z=Promise.all(H);n.push(Z),Z.then(()=>{var K,Y,Q,ee,te,se,ie,ae,re,ne;a.alphaDiscardMode=ge[f.alphaMode],a.objectOpacity=this.fullOpacity,c.textureMemoryUsage+=((Y=(K=a.baseColorTexture)==null?void 0:K.glTexture)==null?void 0:Y.usedMemory)??0,a.usePBR&&(c.textureMemoryUsage+=(((ee=(Q=a.metallicRoughnessTexture)==null?void 0:Q.glTexture)==null?void 0:ee.usedMemory)??0)+(((se=(te=a.emissionTexture)==null?void 0:te.glTexture)==null?void 0:se.usedMemory)??0)+(((ae=(ie=a.occlusionTexture)==null?void 0:ie.glTexture)==null?void 0:ae.usedMemory)??0)+(((ne=(re=a.normalTexture)==null?void 0:re.glTexture)==null?void 0:ne.usedMemory)??0))}),a.commonMaterialParameters.doubleSided=f.isDoubleSided,a.commonMaterialParameters.cullFace=f.faceCulling?Ht[f.faceCulling]:0,this._initialCullFace.set(A,a.commonMaterialParameters.cullFace),a.commonMaterialParameters.hasSlicePlane=this.slicePlaneEnabled,a.componentParameters.castShadows=0,a.textureAlphaCutoff=f.alphaCutoff??ut,a.alphaDiscardMode=ge[f.alphaMode],a.isIntegratedMesh=!0,a.sphereDepthInterpolate=this.layer.hasGoogleUrl,a.polygonOffsetEnabled=!1,a.hasOccludees=!1,a.ellipsoidMode=Tt(this.view.spatialReference)};this._collection.updateMaterial(A,x)}s.push(A),u+=this._collection.getObjectGPUMemoryUsage(A)}await Promise.all(n);const v=new Array;d.forEach(_=>{v.push(_)});const m=new Vt(e.handle,s,v,b,u,c.textureMemoryUsage,g);return this._memCache.put(`${m.handle}`,m),this._lyrHandleToObjects.set(e.handle,m),this._cacheMemory+=m.usedMemory,{memUsageBytes:m.usedMemory}}freeRenderable(e){const t=this._lyrHandleToObjects.get(e);t&&(t.isVisible?(this._visibleObjects.delete(t),this._usedMemory-=t.usedMemory):this._cacheMemory-=t.usedMemory,this.freeObject(t),this._lyrHandleToObjects.delete(e))}freeObject(e){this._memCache.pop(`${e.handle}`),e.textures.forEach(t=>this._stage.removeTexture(t)),e.componentObjects.forEach(t=>{this._collection.destroyObject(t),this._initialCullFace.delete(t)})}setRenderableVisibility(e,t,r){for(let n=0;n<r;++n){const o=t[n];if(!o)continue;const h=e[n],l=this._lyrHandleToObjects.get(h);if(l){if(l.isVisible)continue;this._visibleGeometryChanged(),l.isVisible=!0,this._visibleObjects.add(l),this._usedMemory+=l.usedMemory,this._cacheMemory-=l.usedMemory,l.componentObjects.forEach(i=>{this._collection.setObjectVisibility(i,o),this._elevationProvider.notifyObjectChanged(this._collection.getComponentObb(i))}),this._memCache.pop(`${h}`)}}for(let n=0;n<r;++n){const o=e[n],h=t[n];if(h)continue;const l=this._lyrHandleToObjects.get(o);if(l){if(!l.isVisible)continue;this._visibleGeometryChanged(),l.isVisible=!1,this._visibleObjects.delete(l),this._usedMemory-=l.usedMemory,this._cacheMemory+=l.usedMemory,l.componentObjects.forEach(i=>{this._collection.setObjectVisibility(i,h),this._elevationProvider.notifyObjectChanged(this._collection.getComponentObb(i))}),this._memCache.put(`${o}`,l)}}}_getTexture(e,t,r,n){var h,l;let o=null;if(e&&((h=t.desc)!=null&&h.images)&&((l=t.data)!=null&&l.buffer)){const i=t.desc.images[e==null?void 0:e.imageId];if(o=r.get(i),!o&&i){const y=this._stage.renderView.renderingContext.parameters.maxMaxAnisotropy,g=!!i.mipCount||y>1,b=St[e.wrapMode??"None"];let u=i.alpha?6408:6407;const c=new Uint8Array(t.data.buffer,i.data.byteOffset,i.data.byteCount);let s=null,d=null,p=null;switch(i.format){case"Raw":i.pixelFormat==="R8"?(s=c,u=6403,d=""):i.pixelFormat==="Rgb8"?(s=c,u=6407,d=""):i.pixelFormat==="Rgba8"&&(s=c,u=6408,d="");break;case"Dxt1":s=c,u=6407,d="image/vnd-ms.dds";break;case"Dxt5":s=c,u=6408,d="image/vnd-ms.dds";break;case"Basis":s=c,u=6407,d="image/ktx2";break;case"Png":d="image/png",p=document.createElement("img");break;case"Jpeg":d="image/jpeg",p=document.createElement("img");break;case"Etc2":d="image/ktx",p=document.createElement("img");break;case"Astc":this._dbg(3,"Astc texture not supported");break;case"Pvrtc":this._dbg(3,"Pvrtc texture not supported")}if(p&&d){const v=new Blob([c],{type:d});p.src=URL.createObjectURL(v),s=p}if(s&&d!=null){const v=G("enable-feature:esri-compress-IM-textures")?{compressionTracker:this._compressionTracker,compressionCallback:m=>{m&&m>0&&(n.textureMemoryUsage-=m)}}:void 0;o=new at(s,{mipmap:g,maxAnisotropy:y,encoding:d,wrap:b,pixelFormat:u,compressionOptions:v,noUnpackFlip:!0,width:i.mip0Width,height:i.mip0Height}),this._stage.addTexture(o),r.set(i,o)}}}return o?new Ot(this.view.stage.renderView.textures,o.id):null}getBufferViews(e,t,r){let n,o,h,l,i,y,g,b=null;for(let u=0;u<e.atrbs.length;u++){const c=e.atrbs[u],s=c.view,d=void 0,p=s.byteOffset+s.byteCount,v=s.byteCount/Et[s.type],m=[...Array(v).keys()].map(w=>w);try{switch(c.sem){case"Position":s.ncomp!==3||s.type!=="F32"?this._dbg(3,"[Unsupported Feature] Unsupported view for Position ("+s+")"):(n=new W(t,s.byteOffset,d,p),o=new k(n.typedBuffer,m,3));break;case"Normal":if(s.ncomp!==3||s.type!=="F32")this._dbg(3,"[Unsupported Feature] Unsupported view for Normal ("+s+")");else{const w=new W(t,s.byteOffset,d,p),_=dt(w.typedBuffer,r);i=new ht(_.buffer),y=new k(i.typedBuffer,m,2)}break;case"TexCoord":s.ncomp!==2||s.type!=="F32"?this._dbg(3,"[Unsupported Feature] Unsupported view for Texcoord ("+s+")"):l===void 0&&(l=new k(new he(t,s.byteOffset,d,p).typedBuffer,m,2));break;case"Color":s.ncomp===4?(s.type==="F32"&&(b=new rt(t,s.byteOffset,d,p)),s.type==="U8"&&(b=new nt(t,s.byteOffset,d,p)),s.type==="U16"&&(b=new ot(t,s.byteOffset,d,p))):s.ncomp===3&&(s.type==="F32"&&(b=new W(t,s.byteOffset,d,p)),s.type==="U8"&&(b=new lt(t,s.byteOffset,d,p)),s.type==="U16"&&(b=new ct(t,s.byteOffset,d,p))),b==null?this._dbg(2,"[Unsupported Feature] Unsupported view for Color ("+s+")"):h=new k(b.typedBuffer,m,s.ncomp);break;case"FeatureIndex":break;default:this._dbg(2,"[Unsupported Feature] Unsupported semantic ("+c.sem+"). Skipping vertex attribute.")}}catch(w){this._dbg(2,"Error Creating buffer ("+w+"). Skipping vertex attribute.")}}if(e.index){const u=e.index.view,c=void 0,s=u.byteOffset+u.byteCount;switch(e.index.view.type){case"U16":g=new me(t,u.byteOffset,c,s);break;case"U32":g=new ue(t,u.byteOffset,c,s);break;default:this._dbg(3,"[Unsupported Feature] index type not supported ("+u.type+").")}}if(g==null&&n!=null){const u=n.count;if(u<65535){const c=new Uint16Array(u);g=new me(c.buffer)}else{const c=new Uint32Array(u);g=new ue(c.buffer)}for(let c=0;c<u;c++)g.set(c,c)}return{positionView:n,positionAttr:o,colorAttr:h,texCoord0Attr:l,indicesView:g,normalsView:i,normalsAttr:y}}_loadModifications(){if(this.removeHandles("modifications"),this.layer.modifications==null)return void(this._modifications=[]);const e=this.layer.modifications;this.addHandles(this._updatingHandles.addOnCollectionChange(()=>e,()=>this._modifications=e.toArray(),F),"modifications")}_deletePerObjectData(e){var t;(t=this._wasm)==null||t.onRenderableEvicted(this,e.handle,e.usedMemory),this.freeRenderable(e.handle)}_dbg(e,t){this._dbgFlags.has(e)&&(e===3?pe.getLogger(this).error(t):pe.getLogger(this).warn(t))}};T([S()],C.prototype,"fullOpacity",null),T([S({type:[xt]})],C.prototype,"_modifications",void 0),T([S()],C.prototype,"_visibleGeometryChangedSchedulerHandle",void 0),T([S()],C.prototype,"layer",void 0),T([S({readOnly:!0})],C.prototype,"visibleAtCurrentScale",null),T([S()],C.prototype,"elevationOffset",null),C=T([yt("esri.views.3d.layers.IntegratedMesh3DTilesLayerView3D")],C);const qt=C,ye=O();function kt(e,t){const r=ft(e);return gt(ye,r.center,t),r.center=ye,r}function It(e){return e?new mt(e.center,e.halfSize,pt(...e.quaternion)):null}export{qt as default};
