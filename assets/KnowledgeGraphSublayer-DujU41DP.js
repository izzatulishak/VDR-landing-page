const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/lclayout-BKmmdaIb.js","assets/_commonjsHelpers-DCkdB7M8.js"])))=>i.map(i=>d[i]);
import{aL as Te,rR as de,ce as yt,fQ as Y,gb as $t,s as ee,g4 as Nt,aM as vt,Z as je,c as St,gC as Lt,dB as ht,q as mt,ax as ft,bs as oe,bZ as Mt,gy as Ie,gz as he,$ as Ee,fY as ne,s4 as qe,P as gt,_ as h,m,b as Ne,mT as bt,nA as kt,nB as Dt,mU as wt,nF as Ct,vQ as xt,tF as Ft,o1 as pe,E as me,vR as fe,x as Pe,hi as Rt,by as At,pI as Ge,W as Ot,av as jt,nV as qt,nW as Pt,nX as Gt,hF as Ut,nY as Ht,hX as zt,hz as Qt,hG as Wt,fF as Bt,vS as Vt,bd as we,gB as ue,n_ as Jt,q5 as Zt,vT as Ue,g3 as He,nD as Yt,bq as Kt,n$ as Xt,a2 as es,a1 as ts,L as ss,au as V,vU as ns,vV as rs,vW as is,tk as as,vX as os,vY as ls,hH as ps,o7 as ds,o8 as us,q4 as cs,vZ as ys,nH as hs,m_ as ms,o3 as fs,qC as gs,bx as bs,sH as ws,o0 as Ts}from"./index-BiSWWdHA.js";import{i as xe,r as Is,n as Fe,a as le,l as Es,V as _s}from"./knowledgeGraphService-DCBlGZo_.js";import{I as _e,t as $e,_ as H,E as ge,S as Re,o as ke}from"./constants-SxxbBSOD.js";import{p as ie,a as ze,i as Qe}from"./GraphQueryStreaming-ReZbkfpP.js";import{f as $s}from"./FeatureStore-BNsno4IM.js";import{W as Ns}from"./QueryEngine-C7S6tZKA.js";import{l as vs,F as Ss}from"./FormTemplate-voUkQBnG.js";import{L as We}from"./utils-C41_d6Mo.js";let Ls=class{constructor(){this.version="",this.queryResult=new Ms}},Ms=class{constructor(){this.featureResult=new ks}},ks=class{constructor(){this.objectIdFieldName="",this.uniqueIdField=new Ds,this.globalIdFieldName="",this.geohashFieldName="",this.geometryProperties=new Cs,this.geometryType=null,this.spatialReference=new Te,this.exceededTransferLimit=!1,this.hasZ=!1,this.hasM=!1,this.transform=new Tt,this.fields=[],this.fieldNameToAttributeIndexMap={},this.values=[],this.features=[],this.geometryFields=[]}},Ds=class{constructor(){this.name="",this.isSystemMaintained=!1}},Cs=class{constructor(){this.shapeAreaFieldName="",this.shapeLengthFieldName="",this.units=""}},Tt=class{constructor(){this.quantizeOriginPosition="upperLeft",this.scale=new xs,this.translate=new Fs}},xs=class{constructor(){this.xScale=0,this.yScale=0,this.mScale=0,this.zScale=0}},Fs=class{constructor(){this.xTranslate=0,this.yTranslate=0,this.mTranslate=0,this.zTranslate=0}},Rs=class{constructor(){this.name="",this.fieldType="esriFieldTypeString",this.alias="",this.sqlType="sqlTypeVarchar",this.domain="",this.defaultValue=""}},As=class{constructor(){this.attributes=[],this.compressedGeometry=new De,this.centroid=new De,this.aggregateGeometries=[]}},De=class{constructor(){this.geometryType=null,this.lengths=[],this.coords=[]}};const Os=["ELEMENTUID","TYPENAME"],js={upperLeft:0,lowerLeft:1},qs={sqlTypeBigInt:0,sqlTypeBinary:1,sqlTypeBit:2,sqlTypeChar:3,sqlTypeDate:4,sqlTypeDecimal:5,sqlTypeDouble:6,sqlTypeFloat:7,sqlTypeGeometry:8,sqlTypeGUID:9,sqlTypeInteger:10,sqlTypeLongNVarchar:11,sqlTypeLongVarbinary:12,sqlTypeLongVarchar:13,sqlTypeNChar:14,sqlTypeNVarChar:15,sqlTypeOther:16,sqlTypeReal:17,sqlTypeSmallInt:18,sqlTypeSqlXml:19,sqlTypeTime:20,sqlTypeTimestamp:21,sqlTypeTimestamp2:22,sqlTypeTinyInt:23,sqlTypeVarbinary:24,sqlTypeVarchar:25};function Ps(t){const e=new Ls;e.version=t.version;const s=t.get_query_result();if(s.results_type.value!==0)throw new Error("Got a non-feature collection type");const n=s.get_feature_result(),r=e.queryResult.featureResult;r.objectIdFieldName=n.objectid_field_name,r.exceededTransferLimit=n.exceeded_transfer_limit,r.hasM=n.has_m,r.hasZ=n.has_z,r.geometryType=de(xe,n.geometry_type.value),r.globalIdFieldName=n.globalid_field_name,r.geohashFieldName=n.geohash_field_name;const i=r.uniqueIdField,a=n.unique_id_field;i.name=a.name,i.isSystemMaintained=a.isSystemMaintained;const o=r.geometryProperties,p=n.geometry_properties;o.shapeAreaFieldName=p.shapeAreaFieldName,o.shapeLengthFieldName=p.shapeLengthFieldName,o.units=p.units;const c=r.spatialReference,y=n.spatial_reference;c.wkid=y.wkid,c.latestWkid=y.latestWkid,c.vcsWkid=y.vcsWkid,c.latestVcsWkid=y.latestVcsWkid,c.wkt=y.wkt,r.transform=Us(n.transform);const d=r.fields,l=r.fieldNameToAttributeIndexMap,u=n.fields,b=u.size();for(let _=0;_<b;_++){const k=u.get(_),I=It(k);d.push(I),l[I.name]=_,k.delete()}u.delete();const v=r.values,$=n.values_count();for(let _=0;_<$;_++)v.push(n.get_value_at(_));const R=r.features,f=n.features,N=f.size();if(N>0){for(const _ of Os)if(l[_]===void 0)throw new Error(`Feature collection missing required attribute: ${_}`)}for(let _=0;_<N;_++){const k=new As,I=f.get(_),q=k.attributes,G=I.attributes_count();for(let P=0;P<G;P++)q.push(I.get_attribute_at(P));const O=I.get_compressed_geometry();O&&(k.compressedGeometry=Se(O),k.centroid=Se(I.get_centroid()));const z=k.aggregateGeometries,U=I.aggregate_geometries,te=U.size();for(let P=0;P<te;P++){const E=U.get(P),w=Se(E);z.push(w),E.delete()}U.delete(),R.push(k),I.delete()}f.delete();const A=r.geometryFields,C=n.geometry_fields,L=C.size();for(let _=0;_<L;_++){const k=C.get(_),I=Gs(k);A.push(I),k.delete()}return C.delete(),e}function Se(t){const e=new De;e.geometryType=de(xe,t.geometry_type.value);const s=[],n=[];for(let r=0;r<t.lengths.length;r++)s.push(t.lengths[r]);for(let r=0;r<t.coords.length;r++)n.push(t.coords[r]);return e.lengths=s,e.coords=n,e}function It(t){const e=new Rs;return e.name=t.name,e.alias=t.alias,e.fieldType=de(Is,t.field_type.value),e.sqlType=de(qs,t.sql_type.value),e.domain=t.domain,e.defaultValue=t.default_value,e}function Gs(t){const e=It(t);return e.geometryType=de(xe,t.geometry_type.value),e}function Us(t){const e=new Tt;e.quantizeOriginPosition=de(js,t.quantizeOriginPosition.value);const s=e.scale,n=t.scale;s.xScale=n.xScale,s.yScale=n.yScale,s.mScale=n.mScale,s.zScale=n.zScale;const r=e.translate,i=t.translate;return r.xTranslate=i.xTranslate,r.yTranslate=i.yTranslate,r.mTranslate=i.mTranslate,r.zTranslate=i.zTranslate,e}async function Hs(t){const e=[],s={generateAllSublayers:!1,namedTypeDefinitions:new Map};return t.entitiesUrl&&e.push(Be(t.entitiesUrl).then(n=>{Ve(n,s)})),t.relationshipsUrl&&e.push(Be(t.relationshipsUrl).then(n=>{Ve(n,s)})),await Promise.all(e),s}async function Gn(t,e){e??(e=!1);const s={generateAllSublayers:e,namedTypeDefinitions:new Map};return await Ws(t).then(n=>{Vs(n,s)}),s}async function Un(t){const e=await Fe(),s=new e.MapOfObjectIdentifierSets;zs(s,e,t);const n=new e.MapOfObjectIdentifierSetsEncoder;try{n.set_map_of_identifier_sets(s),n.encode();const r=n.get_encoding_result();if(r.error.error_code!==0)throw new ee("knowledge-graph:layer-support-utils",r.error.error_message);const i=structuredClone(r.get_byte_buffer());return n.delete(),i}finally{s.delete()}}function zs(t,e,s){for(const[n,r]of s.namedTypeDefinitions){if(!r.members||r.useAllData)continue;const i=r.members.keys();let a=!1,o=!0;const p=new e.ObjectIdArray,c=new e.StringArray,y=new e.GlobalIdArray,d=new e.IdentifierArray,l=new e.ObjectIdentifierSet;for(const u of i)o&&(a=!isNaN(Number(u)),o=!1),a?p.add_objectid(Number(u)):(c.add_string(u),y.add_globalid(u)),d.add_identifier(u);l.set_oid_array(p),l.set_string_array(c),l.set_globalid_array(y),l.set_identifier_array(d),p.delete(),c.delete(),y.delete(),d.delete(),t.put_identifier_set(n,l),l.delete()}return t}async function Be(t){const e=await yt(t,{responseType:"array-buffer"});return Qs(await e.data)}async function Qs(t){const e=new(await Fe()).FeatureCollectionDecoder,s=e.decode(new Uint8Array(t));if(s.error_code!==0)throw new ee("knowledge-graph:layer-support-utils",s.error_message);const n=e.get_feature_collection(),r=Ps(n);return e.delete(),r}async function Ws(t){const e=await yt(t,{responseType:"array-buffer"}),s=await e.data;return Bs(new Uint8Array(s))}async function Bs(t){const e=new(await Fe()).MapOfObjectIdentifierSetsDecoder,s=e.decode(new Uint8Array(t)),n=new Map;if(s.error_code!==0)throw new ee("knowledge-graph:layer-support-utils",s.error_message);const r=e.get_map_of_identifier_sets(),i=r.keys,a=i.size();for(let o=0;o<a;o++){const p=i.get(o),c=r.query_identifier_set(p),y=[];if(c.id_array_type.value===1){const d=c.get_globalid_array(),l=d.count();for(let u=0;u<l;u++)y.push(d.get_globalid_at(u))}else if(c.id_array_type.value===3){const d=c.get_identifier_array(),l=d.count();for(let u=0;u<l;u++)y.push(d.get_identifier_at(u).toString())}else if(c.id_array_type.value===2){const d=c.get_string_array(),l=d.count();for(let u=0;u<l;u++)y.push(d.get_string_at(u))}else{if(c.id_array_type.value!==0)throw new ee("knowledge-graph:layer-support-utils","Tried to encode an unexpected ID Array type.");{const d=c.get_oid_array(),l=d.count();for(let u=0;u<l;u++)y.push(d.get_objectid_at(u).toString())}}n.set(p,y)}return e.delete(),n}function Ve(t,e){var n,r,i;if(!((n=t==null?void 0:t.queryResult)!=null&&n.featureResult))return e;const s=t.queryResult.featureResult.fieldNameToAttributeIndexMap;for(const a of t.queryResult.featureResult.features){const o=a.attributes[s.TYPENAME],p=Y(e.namedTypeDefinitions,o,()=>({useAllData:!1,members:new Map})),c=a.attributes[s.ELEMENTUID];if(((i=(r=a.compressedGeometry)==null?void 0:r.coords)==null?void 0:i.length)>0){let y=a.compressedGeometry.lengths;a.compressedGeometry.geometryType==="esriGeometryPoint"&&(y=[]),p.members.set(c,{id:c,linkChartLocation:new $t(y,a.compressedGeometry.coords)})}else p.members.set(c,{id:c})}return e}function Vs(t,e){for(const[s,n]of t){const r=Y(e.namedTypeDefinitions,s,()=>({useAllData:!1,members:new Map}));for(const i of n)r.members.has(i)||r.members.set(i,{id:i})}return e}const Hn={fetchAndConvertSerializedLinkChart:t=>Hs(t)},Ce=(t,e)=>{if(t.type==="column-reference")return t.column===e.systemOidFieldName?"ID(n)":`n.${t.column}`;if(t.type==="string")return`'${t.value}'`;if(t.type==="number")return`${t.value}`;if(t.type==="binary-expression"&&e.supportedSqlTypes.has(t.left.type)&&e.supportedSqlTypes.has(t.right.type)&&e.supportedSqlOperators.has(t.operator))return`${Ce(t.left,e)} ${t.operator} ${Ce(t.right,e)}`;if(t.type==="binary-expression"&&t.operator==="LIKE"){let s="";if(t.left.type==="function"&&t.left.args.value[0].type==="column-reference")s+=`lower(n.${t.left.args.value[0].column})`;else{if(t.left.type!=="column-reference")return e.unsupportedOperationFound=!0,"";s+=`lower(n.${t.left.column})`}if(s+=" CONTAINS (",t.right.type!=="string")return e.unsupportedOperationFound=!0,"";{let n=t.right.value;n.startsWith("%")&&(n=n.slice(1)),n.endsWith("%")&&(n=n.slice(0,-1)),s+=`'${n.toLowerCase()}')`}return s}return e.unsupportedOperationFound=!0,""};let Le=class ae{constructor(){this._featureLookup=new Map}static getInstance(){return ae.instance||(ae.instance=new ae),ae.instance}static resetInstance(){ae.instance&&(ae.instance=null)}deleteFromStore(e){e.forEach(s=>{this._featureLookup.delete(s)})}readFromStoreByList(e){const s=[];return e.forEach(n=>{const r=this.readFromStoreById(n);r&&s.push(r)}),s}readFromStoreById(e){return this._featureLookup.get(e)??null}writeToStore(e,s,n){const r=[];return e.forEach(i=>{if(!(i!=null&&i.id))return;i.properties||(i.properties=[]);let a,o=null;if(n&&i.properties[n]&&(o=Nt(i.properties[n])),"originId"in i&&"destinationId"in i&&(i.properties[_e]=i.originId,i.properties[$e]=i.destinationId),i.properties[s]=i.id,i.id&&this._featureLookup.has(i.id)&&this._featureLookup.get(i.id).attributes){const p=this._featureLookup.get(i.id),c=JSON.parse(JSON.stringify(Object.assign(p.attributes,i.properties)));n&&i.properties[n]&&(c[n]=vt(i.properties[n])),a=new je(o?JSON.parse(JSON.stringify(o)):p!=null&&p.geometry?JSON.parse(JSON.stringify(p.geometry)):null,c,null,i.properties[s])}else a=new je(o?JSON.parse(JSON.stringify(o)):null,i.properties,null,i.properties[s]);this._featureLookup.set(`${i.typeName?`${i.typeName}__${i.id}`:i.id}`,a),r.push(a)}),r}},Me,T=null;function zn(){return Me||(Me=St(()=>import("./lclayout-BKmmdaIb.js"),__vite__mapDeps([0,1])).then(t=>t.l).then(({default:t})=>t({locateFile:e=>Lt(`esri/libs/linkchartlayout/${e}`)})).then(t=>{Js(t)}),Me)}function Js(t){T=t}const Je={right:0,left:1,top:2,bottom:3},Ze={none:0,"start-only":1,"start-and-end":2};function Zs(t){const e={timeDirection:"right",timeBannerUTCOffsetInMinutes:0,eventsTicksVisualization:"start-and-end",showDurationLineForNonZeroDurationEntityEvents:!0,durationLineWidth:5,entityPositionAtDurationRatio:1,showNonZeroDurationIntervalBounds:!1,separateTimeOverlaps:!0,separateTimelineOverlaps:!0,moveFirstBends:!0,secondBendRatio:.3,lineSeparationMultiplier:1,spaceSeparatedLinesEvenly:!1,useBezierCurves:!1,separatedLineShapeRatio:0,...t==null?void 0:t.toJSON(),eventsTicksVisualization:(t==null?void 0:t.eventsTicksVisualization)??"start-and-end"};return{...e,timeDirection:{value:Je[e.timeDirection]??Je.right},eventsTicksVisualization:{value:Ze[e.eventsTicksVisualization]??Ze["start-and-end"]}}}function re(t,e,s,n,r,i){const a=s.length,o=r.length,p=Float64Array.BYTES_PER_ELEMENT,c=Uint32Array.BYTES_PER_ELEMENT,y=Uint8Array.BYTES_PER_ELEMENT,d=16,l=d+a*(y+2*p)+o*(2*c),u=T._malloc(l);try{const b=u+d-u%d,v=b+a*p,$=v+a*p,R=$+o*c,f=R+o*c,N=()=>[T.HEAPF64.subarray(b>>3,(b>>3)+a),T.HEAPF64.subarray(v>>3,(v>>3)+a),T.HEAPU32.subarray($>>2,($>>2)+o),T.HEAPU32.subarray(R>>2,(R>>2)+o),T.HEAPU8.subarray(f,f+a)],[A,C,L,_,k]=N();A.set(s),C.set(n),L.set(r),_.set(i),k.set(e);const I=t(a,f,b,v,o,$,R);let q=null,G=null;if(I.value===0){const E=T.getLayoutLinksTypes(),w=T.getLayoutLinksVerticesEndIndices(),x=T.getLayoutLinksVertices(),F=T.countLayoutLinksVertices();!o||E&&w?F&&!x?I.value=1:(q={types:new Uint8Array(T.HEAPU8.subarray(E,E+o)),vertexEndIndex:new Uint32Array(T.HEAPU32.subarray(w>>2,(w>>2)+o)),vertices:new Float64Array(T.HEAPF64.subarray(x>>3,(x>>3)+2*F))},G=T.getAuxiliaryGraphicElements()):I.value=1}const[O,z,U,te,P]=N();return s.set(O),n.set(z),r.set(U),i.set(te),e.set(P),{status:I.value,links:q,graphics:G}}finally{T._free(u),T.cleanupLayout()}}const Ye=2,Ke=1,Xe=-1;var et,tt,st,nt,rt,it,at;(function(t){function e(){return T.getMinIdealEdgeLength()}function s(n,r,i,a,o,p,c=Ye,y=Ke,d=Xe){return re((l,u,b,v,$,R,f)=>T.applyForceDirectedLayout(n,l,u,b,v,$,R,f,c,y,d),r,i,a,o,p)}t.getMinIdealEdgeLength=e,t.apply=s})(et||(et={})),function(t){function e(s,n,r,i,a,o,p=Ye,c=Ke,y=Xe){return re((d,l,u,b,v,$,R)=>T.applyCommunityLayout(s,d,l,u,b,v,$,R,p,c,y),n,r,i,a,o)}t.apply=e}(tt||(tt={})),function(t){function e(s,n,r,i,a,o){return re((p,c,y,d,l,u,b)=>T.applySimpleLayout(s,p,c,y,d,l,u,b),n,r,i,a,o)}t.apply=e}(st||(st={})),function(t){function e(s,n,r,i,a,o){return re((p,c,y,d,l,u,b)=>T.applyHierarchicalLayout(s,p,c,y,d,l,u,b),n,r,i,a,o)}t.apply=e}(nt||(nt={})),function(t){function e(s,n,r,i,a,o){return re((p,c,y,d,l,u,b)=>T.applyRadialTreeLayout(s,p,c,y,d,l,u,b),n,r,i,a,o)}t.apply=e}(rt||(rt={})),function(t){function e(s,n,r,i,a,o){return re((p,c,y,d,l,u,b)=>T.applySmartTreeLayout(s,p,c,y,d,l,u,b),n,r,i,a,o)}t.apply=e}(it||(it={})),function(t){function e(s,n,r,i,a,o,p,c,y,d,l,u){return re((b,v,$,R,f,N,A)=>{if(a.length!==b)return{value:1};if(o.length!==b)return{value:1};if(y.length!==f)return{value:1};if(d.length!==f)return{value:1};const C=Float64Array.BYTES_PER_ELEMENT,L=16,_=T._malloc(L+b*C),k=T._malloc(L+b*C),I=T._malloc(L+f*C),q=T._malloc(L+f*C),G=_+L-_%L,O=k+L-k%L,z=I+L-I%L,U=q+L-q%L;try{return T.HEAPF64.subarray(G>>3,(G>>3)+b).set(a),T.HEAPF64.subarray(O>>3,(O>>3)+b).set(o),T.HEAPF64.subarray(z>>3,(z>>3)+f).set(y),T.HEAPF64.subarray(U>>3,(U>>3)+f).set(d),T.applyChronologicalLayout(s,b,v,$,R,G,O,f,N,A,z,U,l,Zs(u))}finally{T._free(_),T._free(k),T._free(I),T._free(q)}},n,r,i,p,c)}t.apply=e}(at||(at={}));ht()({none:"none",startAndEnd:"start-and-end",startOnly:"start-only"});ht()({absoluteValue:"absolute-value",multiplier:"multiplier"});const Ys=new Map([["basic-grid","basic-grid"],["geographic-organic-standard","geographic-organic-standard"],["hierarchical-bottom-to-top","hierarchical-bottom-to-top"],["hierarchical-top-to-bottom","hierarchical-bottom-to-top"],["organic-community","organic-community"],["organic-fusiform","organic-standard"],["organic-leaf-circle","organic-standard"],["organic-standard","organic-standard"],["radial-node-centric","radial-root-centric"],["radial-root-centric","radial-root-centric"],["tree-bottom-to-top","tree-left-to-right"],["tree-left-to-right","tree-left-to-right"],["tree-right-to-left","tree-left-to-right"],["tree-top-to-bottom","tree-left-to-right"],["chronological-mono-timeline","chronological-mono-timeline"],["chronological-multi-timeline","chronological-multi-timeline"]]);function Ks(t,e){var n,r;const s=new Map;if((n=e.dataModel)!=null&&n.relationshipTypes)for(const i of e.dataModel.relationshipTypes)i.name&&s.set(i.name,[]);for(const i of t)s.has(i.typeName)&&((r=s.get(i.typeName))==null||r.push(i.id));return s}async function Qn(t,e,s){const n=[],r=Ks(t,e),i={},a=[];for(const[y,d]of r){if(d.length<1)continue;const l=`${y}_ids`;i[l]=d,a.push(`MATCH (n)-[r:${y}]->(m) WHERE id(r) in $${l} RETURN id(n), labels(n)[0], id(m), labels(m)[0]`)}if(a.length===0)return[];const o=a.join(" UNION "),p=new ie({openCypherQuery:o,bindParameters:i}),c=(await le(e,p,s==null?void 0:s.requestOptions)).resultRowsStream.getReader();for(;;){const{done:y,value:d}=await c.read();if(y)break;for(const l of d)n.push({id:l[0],typeName:l[1]}),n.push({id:l[2],typeName:l[3]})}return n}const Wn=t=>Ys.get(t)??"radial-root-centric";function Xs(t){if(!t.spatialReference.isWGS84)throw new ee("knowledge-graph:layer-support-utils","The utilsExtentToInBoundsRings function only supports WGS84 spatial references.");return t.clone().normalize().map(e=>[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]])}let Z=class extends mt{constructor(e){var n,r,i;super(e),this._processingCacheUpdatesLookup=new Map,this.knowledgeGraph=null,this.inclusionModeDefinition={generateAllSublayers:!0,namedTypeDefinitions:new Map},this.entityTypeNames=new Set,this.relationshipTypeNames=new Set,this.geographicLookup=new Map,this.sublayerCaches=new Map,this.nodeConnectionsLookup=new Map,this.relationshipConnectionsLookup=new Map,this.memberIdTypeLookup=new Map;const s=new Map;(n=e.knowledgeGraph.dataModel.entityTypes)==null||n.forEach(a=>{var o,p;a.name&&(s.set(a.name,"entity"),this._processingCacheUpdatesLookup.set(a.name,[]),e.inclusionModeDefinition&&!((o=e.inclusionModeDefinition)!=null&&o.generateAllSublayers)||this.entityTypeNames.add(a.name),(p=a.properties)==null||p.forEach(c=>{c.geometryType&&c.geometryType!=="esriGeometryNull"&&this.geographicLookup.set(a.name,{name:c.name??"",geometryType:c.geometryType})}))}),(r=e.knowledgeGraph.dataModel.relationshipTypes)==null||r.forEach(a=>{var o,p;a.name&&(s.set(a.name,"relationship"),this._processingCacheUpdatesLookup.set(a.name,[]),e.inclusionModeDefinition&&!((o=e.inclusionModeDefinition)!=null&&o.generateAllSublayers)||this.relationshipTypeNames.add(a.name),(p=a.properties)==null||p.forEach(c=>{c.geometryType&&c.geometryType!=="esriGeometryNull"&&this.geographicLookup.set(a.name,{name:c.name??"",geometryType:c.geometryType})}))}),(i=e.inclusionModeDefinition)==null||i.namedTypeDefinitions.forEach((a,o)=>{var c,y;if(s.get(o)==="entity")this.entityTypeNames.add(o);else{if(s.get(o)!=="relationship")return ft.getLogger(this).warn(`A named type, ${o}, was in the inclusion list that wasn't in the data model and will be removed`),void((c=e.inclusionModeDefinition)==null?void 0:c.namedTypeDefinitions.delete(o));this.relationshipTypeNames.add(o)}const p=new Map;(y=a.members)==null||y.forEach(d=>{Y(this.memberIdTypeLookup,d.id,()=>new Set).add(o)}),this.sublayerCaches.set(o,p)})}addToLayer(e){e.forEach(({typeName:s,id:n})=>{if(!this.inclusionModeDefinition)throw new ee("knowledge-graph:layer-data-manager","You cannot add to a layer's exclusion list if it was not created with an exclusion list originally");if(this.inclusionModeDefinition.namedTypeDefinitions.has(s)){if(this.inclusionModeDefinition.namedTypeDefinitions.has(s)){const r=this.inclusionModeDefinition.namedTypeDefinitions.get(s);r.members||(r.members=new Map),r.members.set(n,{id:n}),Y(this.memberIdTypeLookup,n,()=>new Set).add(s)}}else{const r=new Map;r.set(n,{id:n}),this.inclusionModeDefinition.namedTypeDefinitions.set(s,{useAllData:!1,members:r}),Y(this.memberIdTypeLookup,n,()=>new Set).add(s)}})}getById(e){return Le.getInstance().readFromStoreById(e)}async getData(e,s,n){var i,a;if(s.objectType.name&&((i=this.inclusionModeDefinition)!=null&&i.namedTypeDefinitions)&&this.inclusionModeDefinition.namedTypeDefinitions.size>0&&!this.inclusionModeDefinition.namedTypeDefinitions.has(s.objectType.name))return[];let r;if(r=e||new oe({where:"1=1",outFields:["*"]}),s.parentCompositeLayer.type==="link-chart"){const o=s.parentCompositeLayer,p=this._processingCacheUpdatesLookup.get(s.objectType.name??""),c=r.outFields;c&&c.length===1&&c[0]===H&&r.where==="1=1"||await Promise.all(p??[]);const y=this.sublayerCaches.has(s.objectType.name??"")?Array.from((a=this.sublayerCaches.get(s.objectType.name))==null?void 0:a.values()):[],d=[];return y.forEach(l=>{if(this.relationshipTypeNames.has(s.objectType.name)){l.geometry=o.relationshipLinkChartDiagramLookup.get(l.attributes[s.objectIdField]);const u=this.memberIdTypeLookup.get(l.attributes[_e]),b=this.memberIdTypeLookup.get(l.attributes[$e]),v=this._isEndEntitySpatial(u,l,_e),$=this._isEndEntitySpatial(b,l,$e);l.attributes[ge]=Number(v&&$)}else{l.geometry=o.entityLinkChartDiagramLookup.get(l.attributes[s.objectIdField]);const u=this.geographicLookup.get(s.objectType.name);u&&l.attributes[u.name]?l.attributes[ge]=1:l.attributes[ge]=0}l.attributes[Re]=l.geometry,d.push(l)}),d}return this.retrieveDataFromService(r,s,n)}async getConnectedRecordIds(e,s,n){const r=[];let i="";const a=this._getNamedTypeIdMapFromNodeIds(e);if(s&&(s==null?void 0:s.length)!==0){for(const d of s)i=i+d+"|";i=i.slice(0,-1)}const o={},p=[];for(const[d,l]of a){const u=`${d}_ids`;o[u]=l,s&&(s==null?void 0:s.length)!==0?p.push(`MATCH (n:${d}) WHERE id(n) IN $${u} WITH n MATCH (n)-[r:${i}]-(m) RETURN id(r), type(r), id(m), labels(m)[0]`):p.push(`MATCH (n:${d}) WHERE id(n) IN $${u} WITH n MATCH (n)-[r]-(m) RETURN id(r), type(r), id(m), labels(m)[0]`)}if(!p.length)return r;const c=p.join(" UNION "),y=(await le(this.knowledgeGraph,new ie({openCypherQuery:c,bindParameters:o}),{signal:n==null?void 0:n.signal})).resultRowsStream.getReader();for(;;){const{done:d,value:l}=await y.read();if(d)break;for(let u=0;u<l.length;u++){const b=l[u];r.push({id:b[0],typeName:b[1]}),r.push({id:b[2],typeName:b[3]})}}return r}async getRelationshipsBetweenNodes(e,s,n){const r=this._getNamedTypeIdMapFromNodeIds(e);if(r.size===0)return[];const i={relationshipExclusionIds:s,possibleConnectionEntityIds:e},a=[];for(const[y,d]of r.entries()){const l=`${y}_ids`;i[l]=d,a.push(`MATCH (n:${y}) WHERE id(n) IN $${l} WITH n MATCH (n)-[r]->(m) WHERE id(m) IN $possibleConnectionEntityIds AND NOT id(r) IN $relationshipExclusionIds RETURN id(r), type(r)`)}const o=a.join(" UNION "),p=[],c=(await le(this.knowledgeGraph,new ie({openCypherQuery:o,bindParameters:i}),{signal:n==null?void 0:n.signal})).resultRowsStream.getReader();for(;;){const{done:y,value:d}=await c.read();if(y)break;for(let l=0;l<d.length;l++){const u=d[l];p.push({id:u[0],typeName:u[1]})}}return p}async getRelationshipsFromNodes(e,s,n,r){const i=this._getNamedTypeIdMapFromNodeIds(e);if(i.size===0||s.length===0)return[];const a={relationshipExclusionIds:n,possibleConnectionEntityIds:s},o=[];for(const[l,u]of i.entries()){const b=`${l}_ids`;a[b]=u,o.push(`MATCH (n:${l}) WHERE id(n) IN $${b} WITH n MATCH (n)-[r]-(m) WHERE id(m) IN $possibleConnectionEntityIds AND NOT id(r) IN $relationshipExclusionIds RETURN id(r), type(r)`)}const p=o.join(" UNION "),c=new Map,y=(await le(this.knowledgeGraph,new ie({openCypherQuery:p,bindParameters:a}),{signal:r==null?void 0:r.signal})).resultRowsStream.getReader();for(;;){const{done:l,value:u}=await y.read();if(l)break;for(let b=0;b<u.length;b++){const v=u[b];let $=c.get(v[1]);$||($=new Set,c.set(v[1],$)),$.add(v[0])}}const d=[];for(const[l,u]of c)for(const b of u)d.push({id:b,typeName:l});return d}async refreshCacheContent(e,s,n,r=!0,i){var y,d,l,u,b,v,$,R;const a=Le.getInstance(),o=[],p=new Map,c=new Map;(y=this.knowledgeGraph.dataModel.entityTypes)==null||y.forEach(f=>{f.name&&c.set(f.name,f)}),(d=this.knowledgeGraph.dataModel.relationshipTypes)==null||d.forEach(f=>{f.name&&c.set(f.name,f)}),e||this.inclusionModeDefinition?e?e.forEach(f=>{var N;if(this.memberIdTypeLookup.has(f))for(const A of this.memberIdTypeLookup.get(f))p.has(A)?(N=p.get(A))==null||N.push(f):p.set(A,[f])}):(u=(l=this.inclusionModeDefinition)==null?void 0:l.namedTypeDefinitions)==null||u.forEach((f,N)=>{f.useAllData?p.set(N,null):f.members&&f.members.forEach(A=>{var C;p.has(N)&&p.get(N)!==null?(C=p.get(N))==null||C.push(A.id):p.set(N,[A.id])})}):((b=this.knowledgeGraph.dataModel.entityTypes)==null||b.forEach(f=>{f.name&&p.set(f.name,null)}),(v=this.knowledgeGraph.dataModel.entityTypes)==null||v.forEach(f=>{f.name&&p.set(f.name,null)}));for(const[f,N]of p){const A=new Set(N),C=new Promise((L,_)=>{(async()=>{var P,E,w,x,F,j,M,Q,S;const I=new Set,q=[];let G,O="",z=!1;if(s||((E=(P=c.get(f))==null?void 0:P.properties)==null||E.forEach(D=>{D.name&&I.add(D.name)})),n&&this.geographicLookup.has(f)){const D=(w=this.geographicLookup.get(f))==null?void 0:w.name;D&&I.add(D)}if(this.entityTypeNames.has(f))O=`MATCH (n:${f}) ${N?"WHERE id(n) IN $ids ":""}return ID(n)`,I.forEach(D=>{O+=`, n.${D}`,q.push(D)});else{if(!this.relationshipTypeNames.has(f))throw new ee("knowledge-graph:layer-data-manager",`The graph type of ${f} could not be determined. Was this type set in the KG data model and inclusion definition?`);z=!0,O=`MATCH ()-[n:${f}]->() ${N?"WHERE id(n) IN $ids ":""}return ID(n), id(startNode(n)), id(endNode(n))`,I.forEach(D=>{O+=`, n.${D}`,q.push(D)})}G=new ie(N?{openCypherQuery:O,bindParameters:{ids:N}}:{openCypherQuery:O});const U=(await le(this.knowledgeGraph,G,{signal:i==null?void 0:i.signal})).resultRowsStream.getReader();for(;;){const{done:D,value:Ae}=await U.read();if(D)break;const Oe=[];for(let K=0;K<Ae.length;K++){const se=Ae[K];let W=0,be=0;const B={properties:{}};for(B.id=se[W],W++,be++,z&&(B.originId=se[W],W++,be++,B.destinationId=se[W],W++,be++,Y(this.nodeConnectionsLookup,B.originId,()=>new Set).add(B.id),Y(this.nodeConnectionsLookup,B.destinationId,()=>new Set).add(B.id),Y(this.relationshipConnectionsLookup,B.id,()=>[B.originId,B.destinationId]));W<se.length;W++)B.properties[q[W-be]]=se[W];A.delete(B.id),Oe.push(B)}const _t=a.writeToStore(Oe,H,(x=this.geographicLookup.get(f))==null?void 0:x.name);this.sublayerCaches.has(f)||this.sublayerCaches.set(f,new Map),r&&!((F=this.inclusionModeDefinition)!=null&&F.namedTypeDefinitions.has(f))&&((j=this.inclusionModeDefinition)==null||j.namedTypeDefinitions.set(f,{useAllData:!1,members:new Map})),r&&!((M=this.inclusionModeDefinition)!=null&&M.namedTypeDefinitions.get(f).members)&&(this.inclusionModeDefinition.namedTypeDefinitions.get(f).members=new Map);const ve=this.sublayerCaches.get(f);_t.forEach(K=>{var se,W;ve==null||ve.set(K.attributes[H],K),r&&!((se=this.inclusionModeDefinition)!=null&&se.namedTypeDefinitions.get(f).members.has(K.attributes[H]))&&((W=this.inclusionModeDefinition)==null||W.namedTypeDefinitions.get(f).members.set(K.attributes[H],{id:K.attributes[H]}),Y(this.memberIdTypeLookup,K.attributes[H],()=>new Set).add(f))})}const te=(Q=this.inclusionModeDefinition)==null?void 0:Q.namedTypeDefinitions.get(f);if(te)for(const D of A)(S=te.members)==null||S.delete(D)})().then(()=>{L(null)}).catch(I=>{I.name==="AbortError"?L(null):_(I)})});o.push(C),($=this._processingCacheUpdatesLookup.get(f))==null||$.push(C)}if(await Promise.all(o),(R=i==null?void 0:i.signal)==null?void 0:R.aborted)throw Mt()}removeFromLayer(e){var r,i,a;const s=new Set,n=new Set(e.map(o=>o.id));for(const o of e)s.add(o.typeName),((r=this.memberIdTypeLookup.get(o.id))==null?void 0:r.size)===1?this.memberIdTypeLookup.delete(o.id):(i=this.memberIdTypeLookup.get(o.id))==null||i.delete(o.typeName),(a=this.inclusionModeDefinition)==null||a.namedTypeDefinitions.forEach((p,c)=>{var y;c===o.typeName&&((y=p.members)!=null&&y.has(o.id))&&p.members.delete(o.id)});s.forEach(o=>{var p;(p=this.sublayerCaches.get(o))==null||p.forEach((c,y)=>{var d;n.has(y)&&((d=this.sublayerCaches.get(o))==null||d.delete(y))})})}async retrieveDataFromService(e,s,n){var v,$,R,f,N,A,C,L,_,k,I,q,G,O,z,U,te,P;const r=Le.getInstance(),i=new Set,a=[];let o,p="",c=[];const y=s.graphType==="relationship",d=(R=($=(v=this.inclusionModeDefinition)==null?void 0:v.namedTypeDefinitions)==null?void 0:$.get(s.objectType.name))==null?void 0:R.useAllData,l=s.parentCompositeLayer.sublayerIdsCache.get(s.objectType.name);let u=!d&&l?Array.from(l).sort():null;if((A=(N=(f=this.inclusionModeDefinition)==null?void 0:f.namedTypeDefinitions)==null?void 0:N.get(s.objectType.name))!=null&&A.useAllData)(_=(L=(C=this.inclusionModeDefinition)==null?void 0:C.namedTypeDefinitions)==null?void 0:L.get(s.objectType.name))!=null&&_.useAllData&&e.objectIds!=null&&(u=e.objectIds);else if(e.objectIds!=null&&u&&u.length>0){const E=e.objectIds;e.objectIds=u.filter(w=>E.includes(w))}else if(e.objectIds!=null)u=e.objectIds;else{if((k=this.inclusionModeDefinition)!=null&&k.namedTypeDefinitions.has(s.objectType.name)&&(!((I=this.inclusionModeDefinition.namedTypeDefinitions.get(s.objectType.name))!=null&&I.members)||((G=(q=this.inclusionModeDefinition.namedTypeDefinitions.get(s.objectType.name))==null?void 0:q.members)==null?void 0:G.size)<1))return e.objectIds=[],[];e.objectIds=u}if(e.outFields!=null){const E=e.outFields;E.includes("*")?s.fields.forEach(w=>{i.add(w.name)}):E.forEach(w=>{w!==H&&w!==s.geometryFieldName&&i.add(w)})}if(e.geometry!=null){const E=e.geometry;let w;const x=s.parentCompositeLayer.dataManager.knowledgeGraph.serviceDefinition,F=x==null?void 0:x.spatialReference,j=(O=x==null?void 0:x.serviceCapabilities)==null?void 0:O.geometryCapabilities;let M=j==null?void 0:j.geometryMaxBoundingRectangleSizeX,Q=j==null?void 0:j.geometryMaxBoundingRectangleSizeY;if(E.type==="point"){let S=E;(z=S.spatialReference)!=null&&z.isWGS84||(await Ie(S.spatialReference,ne),S=he(S,ne)),w=new Ee({spatialReference:ne,xmin:S.x-1e-4,ymin:S.y-1e-4,xmax:S.x+1e-4,ymax:S.y+1e-4})}else(U=E==null?void 0:E.extent)!=null&&U.spatialReference&&!((te=E.spatialReference)!=null&&te.isWGS84)?(await Ie(E.extent.spatialReference,ne),w=he(E.extent,ne)):w=E.extent;if(M&&Q&&F){if(F.wkid!==4326){const S=new Ee({spatialReference:F,xmax:M,ymax:Q}),D=he(S,ne);M=D.xmax,Q=D.ymax}if(w.xmax-w.xmin>M)throw new ee("knowledge-graph:layer-data-manager",`Extent x bounds should be within ${M}° latitude, limit exceeded`);if(w.ymax-w.ymin>Q)throw new ee("knowledge-graph:layer-data-manager",`Extent y bounds should be within ${Q}° longitude, limit exceeded`)}if(e.where!=null&&e.where!=="1=1"){const S=await qe(e.where.toUpperCase(),s.fieldsIndex);s.fields.forEach(D=>{S.fieldNames.includes(D.name)&&i.add(D.name)})}p=y?`Match ()-[n:${s.objectType.name}]->() WHERE esri.graph.ST_Intersects($param_filter_geom, n.${s.geometryFieldName}) return ID(n), id(startNode(r)), id(endNode(r))`:`Match (n:${s.objectType.name}) WHERE esri.graph.ST_Intersects($param_filter_geom, n.${s.geometryFieldName}) return ID(n)`,s.geometryFieldName&&i.add(s.geometryFieldName),i.forEach(S=>{p+=`, n.${S}`,a.push(S)}),o=new ie({openCypherQuery:p,bindParameters:{param_filter_geom:new gt({rings:Xs(w)})}})}else{let E="";if(e.where!=null&&e.where!=="1=1"){const F=await qe(e.where,s.fieldsIndex);s.fields.forEach(M=>{F.fieldNames.includes(M.name)&&i.add(M.name)});const j={systemOidFieldName:H,supportedSqlTypes:new Set(["column-reference","string","number","binary-expression"]),supportedSqlOperators:new Set(["=","<","<=","<>",">",">=","AND","OR","LIKE"]),unsupportedOperationFound:!1};E=Ce(F.parseTree,j),j.unsupportedOperationFound&&(E="")}let w="";w=y?`Match ()-[n:${s.objectType.name}]->()`:`Match (n:${s.objectType.name})`;let x=!1;u&&(x=!0,w+=" WHERE ID(n) IN $ids"),E&&(w+=x?" AND":" WHERE",w+=` ${E}`),w+=" return ID(n)",y&&(w+=", id(startNode(n)), id(endNode(n))"),e.returnGeometry&&s.geometryFieldName&&i.add(s.geometryFieldName),i.forEach(F=>{w+=`, n.${F}`,a.push(F)}),o=new ie(u?{openCypherQuery:w,bindParameters:{ids:u}}:{openCypherQuery:w})}const b=(await le(s.parentCompositeLayer.dataManager.knowledgeGraph,o,n)).resultRowsStream.getReader();for(;;){const{done:E,value:w}=await b.read();if(E)break;const x=[];for(let F=0;F<w.length;F++){const j=w[F];let M=0,Q=0;const S={properties:{}};for(S.id=j[M],M++,Q++,y&&(S.originId=j[M],M++,Q++,S.destinationId=j[M],M++,Q++);M<j.length;M++)S.properties[a[M-Q]]=j[M];x.push(S)}c=c.concat(r.writeToStore(x,H,(P=s.parentCompositeLayer.dataManager.geographicLookup.get(s.objectType.name))==null?void 0:P.name))}return c}_isEndEntitySpatial(e,s,n){var r;for(const i of e??[])if(this.entityTypeNames.has(i)){const a=this.geographicLookup.get(i),o=a&&((r=this.sublayerCaches.get(i))==null?void 0:r.get(s.attributes[n]));if(a&&(o!=null&&o.attributes[a.name]))return!0}return!1}_getNamedTypeIdMapFromNodeIds(e){const s=new Map;return e.forEach(n=>{var r;if(this.memberIdTypeLookup.has(n))for(const i of this.memberIdTypeLookup.get(n)){if(!this.entityTypeNames.has(i))return;s.has(i)?(r=s.get(i))==null||r.push(n):s.set(i,[n])}}),s}};h([m()],Z.prototype,"knowledgeGraph",void 0),h([m()],Z.prototype,"inclusionModeDefinition",void 0),h([m()],Z.prototype,"entityTypeNames",void 0),h([m()],Z.prototype,"relationshipTypeNames",void 0),h([m()],Z.prototype,"geographicLookup",void 0),h([m()],Z.prototype,"sublayerCaches",void 0),h([m()],Z.prototype,"nodeConnectionsLookup",void 0),h([m()],Z.prototype,"relationshipConnectionsLookup",void 0),h([m()],Z.prototype,"memberIdTypeLookup",void 0),Z=h([Ne("esri.layers.knowledgeGraph.KnowledgeGraphLayerDataManager")],Z);const en=Symbol("isKnowledgeGraphGraphicOriginSymbol");var ot;class tn extends bt{get[(ot=en,kt)](){return this.sublayer}get[Dt](){return this.sublayer}get[wt](){return this.sublayer}constructor(e,s){super(),this[ot]=!0,this.type="knowledge-graph",this.layer=e,this.sublayer=s}get id(){return this.layer.id}}const sn=Symbol("isLinkChartGraphicOriginSymbol");var lt;class nn extends bt{get[(lt=sn,wt)](){return this.layer}constructor(e,s){super(),this[lt]=!0,this.type="link-chart",this.layer=e,this.sublayer=s}get id(){return`${this.layer.id}:__${this.sublayer.id}__`}}const pt=Ct(),rn=t=>{const e=t;let s=class extends e{constructor(){super(...arguments),this.fields=[],this.fieldsIndex=null}};return h([m(pt.fields)],s.prototype,"fields",void 0),h([m(pt.fieldsIndex)],s.prototype,"fieldsIndex",void 0),s=h([Ne("esri.layers.knowledgeGraph.KnowledgeGraphSublayerBase")],s),s},an=vs;let X=class extends mt{constructor(t){super(t),this.entityAdds=void 0,this.entityUpdates=void 0,this.entityDeletes=void 0,this.relationshipAdds=void 0,this.relationshipUpdates=void 0,this.relationshipDeletes=void 0,this.options=void 0}};h([m()],X.prototype,"entityAdds",void 0),h([m()],X.prototype,"entityUpdates",void 0),h([m()],X.prototype,"entityDeletes",void 0),h([m()],X.prototype,"relationshipAdds",void 0),h([m()],X.prototype,"relationshipUpdates",void 0),h([m()],X.prototype,"relationshipDeletes",void 0),h([m()],X.prototype,"options",void 0),X=h([Ne("esri.rest.knowledgeGraph.GraphApplyEdits")],X);const on={initializeLayersFromClientData:async(t,e,s)=>{if(e||(e=[...t.layers,...t.tables].map(i=>i.graphTypeName)),(e==null?void 0:e.length)===0)return;const n=new Map;for(const i of e)n.set(i,dt(t,i));const r=await Es(t.dataManager.knowledgeGraph,Array.from(n.values()),{requestOptions:{signal:s==null?void 0:s.signal}});for(const i of[...t.layers,...t.tables]){const a=i.objectType.name;if(a==null)continue;const o=r.get(dt(t,a));if(o){const p=JSON.parse(o);p===null||typeof p!="object"||p.hasOwnProperty("showLabels")||(p.showLabels=!1),i.read(p,{origin:"service"})}}}},dt=(t,e)=>t.type==="knowledge-graph"?`${e}/Map`:`${e}/LinkChart/LinkChartSubLayer`;async function Vn(t,e,s){return on.initializeLayersFromClientData(t,e,s)}const ut=["#4a0932","#b31515","#18382e","#a64f1b","#102432","#8c213f","#ed9310","#2c6954","#144d59","#ffc730","#75351e","#454f4b","#78b1c2","#191921","#8f8f82","#9be0c0","#dbb658","#87b051","#11495c","#c43541","#9c5596","#44498b","#ad9d63","#86afb3","#5c98ca","#b0bfa2","#73241f","#b86b53","#d9d78c","#3e756d","#f260a1","#a0d17d","#c27c30","#eb82eb","#ffdf3c","#ffb259","#ab52b3","#3cccb4","#0095ba","#d92b30"],ln="#8f8f82";function pn(t){return t<0||t>=ut.length?new Pe(ln):new Pe(ut[t])}function dn(t){const e=t.toArray();return new Rt({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,style:"solid",width:.75,color:e},{type:"CIMVectorMarker",enable:!0,size:6,markerPlacement:{type:"CIMMarkerPlacementOnLine",angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-10,ymin:-5,xmax:0,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[-12,-3.47],[-12,3.6],[1.96,-.03],[-12,-3.47]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:e}]}}]}]}}})}function un(t){let e="ESRI__ID",s=4;for(const n of t)if(n.name){if(n.name.toLowerCase()==="name"){e=n.name;break}n.name.toLowerCase().includes("name")?(e=n.name,s=2):n.fieldType==="esriFieldTypeString"&&s>3&&(e=n.name,s=3)}return e}function cn(t,e,s){const n={color:[80,80,80],haloColor:[255,255,255],haloSize:.7,font:{size:10,weight:"normal"}},r=new pe({labelExpressionInfo:new fe({expression:s==="ESRI__ID"?`${e}`:`$feature.${s}`}),labelPlacement:"above-center",symbol:new me(n)}),i=new pe({labelExpressionInfo:new fe({expression:`'${e}' + IIf($feature.ESRI__AggregationCount>1, ' (' + $feature.ESRI__AggregationCount + ')', '')`}),labelPlacement:"center-along",labelPosition:"parallel",repeatLabel:!1,symbol:new me({...n,yoffset:"12px"})});return t==="entity"?[r]:[i]}function yn(t,e,s){const n={color:[255,255,255],haloColor:[0,0,0],haloSize:.7,font:{size:10,weight:"bold"}},r=s==="ESRI__ID"?`${t}`:`$feature.${s}`;return e==="point"?[new pe({labelExpressionInfo:new fe({expression:r}),labelPlacement:"above-center",symbol:new me(n)})]:e==="polyline"?[new pe({labelExpressionInfo:new fe({expression:r}),labelPlacement:"center-along",repeatLabel:!0,symbol:new me(n)})]:e==="polygon"?[new pe({labelExpressionInfo:new fe({expression:r}),labelPlacement:"always-horizontal",symbol:new me(n)})]:null}const hn={capabilities:[],allowGeometryUpdates:!1,serviceCapabilities:{geometryCapabilities:{supportsZValues:!1,supportsMValues:!1}}};function mn(t){const{capabilities:e,allowGeometryUpdates:s,serviceCapabilities:{geometryCapabilities:{supportsZValues:n,supportsMValues:r}}}=(t==null?void 0:t.serviceDefinition)||hn,i=t!=null&&t.dataModel.arcgisManaged?e:e.filter(o=>o==="Query"),a=new Set(i);return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:r,supportsZ:n},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:a.has("Create"),supportsDelete:a.has("Delete"),supportsEditing:a.has("Editing"),supportsChangeTracking:!1,supportsQuery:a.has("Query"),supportsQueryBins:!1,supportsQueryPivot:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:a.has("Update"),supportsExceedsLimitStatistics:!1,supportsAsyncConvert3D:!1},query:Ft,queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:xt,editing:{supportsGeometryUpdate:!!(t!=null&&t.dataModel.arcgisManaged)&&s,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:a.has("Delete"),supportsUpdateByAnonymous:!1,supportsUpdateByOthers:a.has("Update"),supportsAsyncApplyEdits:!1,zDefault:void 0}}}async function fn(t,e){var y;const s=new X,n=e.graphTypeName,r=e.graphType,i=e.parentCompositeLayer.type==="knowledge-graph"?e.geometryFieldName:null,a=!!((y=e.fieldsIndex.get(i))!=null&&y.editable),o=d=>{const l={...d};for(const u of e.fields)u.editable||delete l[u.name];for(const u of Object.keys(d))u.includes("ESRI__")&&delete l[u];return l},p=async d=>{await Ie(d.spatialReference,Te.WGS84);const l=he(d,Te.WGS84);return l.type==="point"?l.normalize():(await jt(l))[0]};for(const d of t.addFeatures??[]){const l=o(d.attributes);Ge(d.sourceLayer)&&d.sourceLayer.graphTypeName===n&&(r==="entity"?(s.entityAdds||(s.entityAdds=[]),i&&d.geometry&&(l[i]=await p(d.geometry)),s.entityAdds.push(new ze({properties:l,typeName:n}))):(s.relationshipAdds||(s.relationshipAdds=[]),s.relationshipAdds.push(new Qe({properties:l,typeName:n}))))}for(const d of t.updateFeatures??[]){const l=d.attributes[H],u=o(d.attributes);Ge(d.sourceLayer)&&d.sourceLayer.graphTypeName===n&&(r==="entity"?(s.entityUpdates||(s.entityUpdates=[]),i&&a&&d.geometry&&(u[i]=await p(d.geometry)),s.entityUpdates.push(new ze({id:l,properties:u,typeName:n}))):(s.relationshipUpdates||(s.relationshipUpdates=[]),s.relationshipUpdates.push(new Qe({id:l,properties:u,typeName:n}))))}const c=new Map;for(const d of t.deleteFeatures??[])if(Ot(d)){const l=d,u=Y(c,l.sourceLayer.graphTypeName,()=>({typeName:l.sourceLayer.graphTypeName,ids:[]}));l.sourceLayer.graphTypeName===n&&u.ids.push(l.attributes[H])}else d.objectId&&typeof d.objectId=="string"&&Y(c,n,()=>({typeName:n,ids:[]})).ids.push(d.objectId);for(const d of c.values())d.ids.length>0&&(r==="entity"?(s.entityDeletes||(s.entityDeletes=[]),s.entityDeletes.push({typeName:d.typeName,ids:d.ids})):(s.relationshipDeletes||(s.relationshipDeletes=[]),s.relationshipDeletes.push({typeName:d.typeName,ids:d.ids})));return s}function gn(t,e){const s={addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]};for(const n of t.editResults)if(n.typeName===e){for(const r of n.adds)s.addFeatureResults.push({objectId:r.id,globalId:r.id});for(const r of n.updates)s.updateFeatureResults.push({objectId:r.id,globalId:r.id});for(const r of n.deletes)s.deleteFeatureResults.push({objectId:r.id,globalId:r.id})}return s}function bn(t){if(!t.objectType)return null;const e=[];for(const s of t.fields)!s.name.includes("ESRI__")&&s.editable&&s.type!=="geometry"&&e.push(new an({fieldName:s.name}));return new Ss({elements:e})}function wn(t){if(!t.objectType)return null;let e=null;switch(t.geometryType){case"point":case"multipoint":e="point";break;case"polyline":e="line";break;case"polygon":e="polygon";break;default:e=null}return[new At({name:t.graphTypeName,drawingTool:e,prototype:{}})]}function J(t){if(!t.json)return t;t.json.write=ct(t.json.write);const e=t.json.origins;if(!e)return t;let s;for(s in e){const n=e[s];n&&(n.write=ct(n.write))}return t}function ct(t){return typeof t=="object"&&t?(t.enabled!==!1&&(t.overridePolicy=Tn(t)),t):t===!0?ce():t}function Tn(t){const{target:e,writer:s,overridePolicy:n,...r}=t;return function(i,a){const o=Et.call(this,i,a);return o.enabled?{...r,...o}:o}}function ce(){return{overridePolicy:Et}}function Et(t,e){const s=!!this.geometryType;let n={enabled:s};return s&&(n={...n,...ye.call(this,t,e)}),n}function ye(t,e){return{ignoreOrigin:this.originIdOf(e)>0}}let g=class extends rn(qt(Pt(Gt(Ut(Ht(zt(Qt(Wt(Bt(ss)))))))))){constructor(t){super(t),this.blendMode="normal",this.charts=null,this.definitionExpression=null,this.displayFilterEnabled=!0,this.displayFilterInfo=null,this.effect=null,this.elevationInfo=null,this.featureEffect=null,this.graphType=null,this.labelsVisible=!0,this.layerType=null,this.legendEnabled=!0,this.maxScale=0,this.minScale=0,this.objectIdField=H,this.objectType=null,this.opacity=1,this.orderBy=null,this.parent=null,this.parentCompositeLayer=null,this.persistenceEnabled=!0,this.popupEnabled=!0,this.popupTemplate=null,this.refreshInterval=0,this.source={openPorts:()=>this.load().then(()=>{const e=new MessageChannel;return new Vt(e.port1,{channel:e,client:{queryFeatures:(s,n={})=>{const r=oe.fromJSON(s);return this.queryFeaturesJSON(r,n)}}}),[e.port2]})},this.type="knowledge-graph-sublayer",this.useViewTime=!0,this.visible=!0}get capabilities(){return this.parent?this.parent.sublayerCapabilities:mn(null)}get userHasUpdateItemPrivileges(){var t;return!!((t=this.parent)!=null&&t.userHasUpdateItemPrivileges)}get editingEnabled(){return this._isOverridden("editingEnabled")?this._get("editingEnabled"):this.capabilities.operations.supportsEditing}set editingEnabled(t){this._overrideIfSome("editingEnabled",t)}get isTable(){return this.parentCompositeLayer.type!=="link-chart"&&this.geometryFieldName==null}get defaultPopupTemplate(){return this.createPopupTemplate()}set featureReduction(t){const e=this._normalizeFeatureReduction(t);this._set("featureReduction",e)}get fields(){var e,s;const t=[];return(s=(e=this.objectType)==null?void 0:e.properties)==null||s.forEach(n=>{const r=n.fieldType==="esriFieldTypeOID"?"esriFieldTypeInteger":n.fieldType;t.push(we.fromJSON({name:n.name,type:r,alias:n.alias,defaultValue:n.defaultValue,editable:n.editable,nullable:n.nullable}))}),t.push(we.fromJSON({name:this.objectIdField,type:"esriFieldTypeString",alias:this.objectIdField,editable:!1}),we.fromJSON({name:ke,type:"esriFieldTypeInteger",alias:ke,editable:!1}),we.fromJSON({name:ge,type:"esriFieldTypeInteger",alias:ge,editable:!1})),t}get formTemplate(){return this._isOverridden("formTemplate")?this._get("formTemplate"):bn(this)}set formTemplate(t){this._overrideIfSome("formTemplate",t)}get geometryType(){var s,n,r;if(((s=this.parentCompositeLayer)==null?void 0:s.type)==="link-chart")return this.graphType==="relationship"?"polyline":"point";const t=(r=this.parentCompositeLayer)==null?void 0:r.dataManager.geographicLookup.get((n=this.objectType)==null?void 0:n.name),e=t==null?void 0:t.geometryType;return e&&e!=="esriGeometryNull"?ue.fromJSON(e):null}get geometryFieldName(){var e,s,n;if(((e=this.parentCompositeLayer)==null?void 0:e.type)==="link-chart")return Re;const t=(n=this.parentCompositeLayer)==null?void 0:n.dataManager.geographicLookup.get((s=this.objectType)==null?void 0:s.name);return(t==null?void 0:t.name)??null}get graphicOrigin(){if(!this.parent)return null;switch(this.parent.type){case"knowledge-graph":return new tn(this.parent,this);case"link-chart":return new nn(this.parent,this)}}get graphTypeName(){var t;return(t=this.objectType)==null?void 0:t.name}set graphTypeName(t){this._set("graphTypeName",t)}get hasM(){var n,r,i,a;const t=(r=this.parentCompositeLayer)==null?void 0:r.dataManager.geographicLookup.get((n=this.objectType)==null?void 0:n.name),e=t==null?void 0:t.name,s=e?(a=(i=this.objectType)==null?void 0:i.properties)==null?void 0:a[e]:null;return(s==null?void 0:s.hasM)??!1}get hasZ(){var n,r,i,a;const t=(r=this.parentCompositeLayer)==null?void 0:r.dataManager.geographicLookup.get((n=this.objectType)==null?void 0:n.name),e=t==null?void 0:t.name,s=e?(a=(i=this.objectType)==null?void 0:i.properties)==null?void 0:a[e]:null;return(s==null?void 0:s.hasZ)??!1}set labelingInfo(t){this._set("labelingInfo",t)}get labelingInfo(){if(this._isOverridden("labelingInfo"))return this._get("labelingInfo");if(!this.objectType||!this.parentCompositeLayer||!this.graphTypeName)return null;const t=this.objectType.properties?un(this.objectType.properties):"ESRI__ID";return this.parentCompositeLayer.type==="link-chart"?cn(this.graphType,this.graphTypeName,t):yn(this.graphTypeName,this.geometryType,t)}set renderer(t){Jt(t,this.fieldsIndex),this._set("renderer",t)}get renderer(){var r,i,a,o;if(this._isOverridden("renderer"))return this._get("renderer");const t=(a=(i=(r=this.parentCompositeLayer)==null?void 0:r.dataManager)==null?void 0:i.knowledgeGraph)==null?void 0:a.dataModel,e=[...(t==null?void 0:t.entityTypes)??[],...(t==null?void 0:t.relationshipTypes)??[]].map(p=>p.name).indexOf(this.graphTypeName),s=pn(e);if(((o=this.parentCompositeLayer)==null?void 0:o.type)==="link-chart"){if(this.graphType==="relationship")return new Zt({type:"simple",symbol:dn(s)});const p=Ue(He(ue.toJSON("point")).renderer);return We(p.symbol,s),p}const n=Ue(He(ue.toJSON(this.geometryType)).renderer);return We(n.symbol,s),n}get spatialReference(){var t,e,s,n;return((n=(s=(e=(t=this.parentCompositeLayer)==null?void 0:t.dataManager)==null?void 0:e.knowledgeGraph)==null?void 0:s.dataModel)==null?void 0:n.spatialReference)??Te.WGS84}get templates(){return this._isOverridden("templates")?this._get("templates"):wn(this)}set templates(t){this._overrideIfSome("templates",t)}set timeInfo(t){this._set("timeInfo",t)}get title(){return this._isOverridden("title")?this._get("title"):this.graphTypeName}set title(t){this._set("title",t)}writeTitle(t,e){e.title=t??"Layer"}createPopupTemplate(t){return Yt(this,t)}createQuery(){return new oe({where:"1=1",outFields:["*"]})}getField(t){return this.fieldsIndex.get(t)}getFieldDomain(t,e){return null}async queryFeatures(t,e){await this.load();const{resolvedQuery:s,queryEngine:n}=await this._setupQueryObjects(t),r=this.graphicOrigin,i=Kt.fromJSON(await n.executeQuery(s.toJSON(),e==null?void 0:e.signal));return i.features.forEach(a=>{a.sourceLayer=this,a.origin=r}),i}async queryFeaturesJSON(t,e){await this.load();const{resolvedQuery:s,queryEngine:n}=await this._setupQueryObjects(t);return await n.executeQuery(s.toJSON(),e==null?void 0:e.signal)}async queryFeatureCount(t,e){await this.load();const{resolvedQuery:s,queryEngine:n}=await this._setupQueryObjects(t);return n.executeQueryForCount(s.toJSON(),e==null?void 0:e.signal)}async queryExtent(t={},e){var o,p,c,y;await this.load();const s={...t,returnGeometry:!0},{resolvedQuery:n,queryEngine:r}=await this._setupQueryObjects(s),i=await r.executeQueryForExtent(n.toJSON(),e==null?void 0:e.signal);let a;return a=((o=i.extent)==null?void 0:o.xmin)!=null&&((p=i.extent)==null?void 0:p.xmax)!=null&&((c=i.extent)==null?void 0:c.ymin)!=null&&((y=i.extent)==null?void 0:y.ymax)!=null?new Ee(i.extent):new Ee,{count:i.count,extent:a}}async queryObjectIds(t,e){await this.load();const s=oe.from(t);let n;if(this.parentCompositeLayer.type==="link-chart"&&this._cachedQueryEngine)n=this._cachedQueryEngine;else{const r=await this.parentCompositeLayer.dataManager.getData(s,this,e);n=this.loadQueryEngine(r)}return await n.executeQueryForIds(s.toJSON(),e==null?void 0:e.signal)}async applyEdits(t){var i;if(!this.parentCompositeLayer.dataManager.knowledgeGraph)throw new ee("knowledge-graph-sublayer:no-knowledge-graph","ApplyEdits cannot be executed because the parent does not have a Knowledge Graph model.  This is usually caused by the layer not yet being loaded");const e=await fn(t,this);e.options={cascadeDelete:!0,cascadeProvenanceDelete:!!((i=this.parent)!=null&&i.knowledgeGraph.serviceDefinition.supportsProvenance)||void 0};const s=await _s(this.parentCompositeLayer.dataManager.knowledgeGraph,e),n=gn(s,this.graphTypeName),r={addedFeatures:n.addFeatureResults,updatedFeatures:n.updateFeatureResults,deletedFeatures:n.deleteFeatureResults,addedAttachments:n.addAttachmentResults,deletedAttachments:n.deleteAttachmentResults,updatedAttachments:n.updateAttachmentResults,exceededTransferLimit:!1,historicMoment:new Date,edits:void 0};return this.emit("edits",r),this.emit("apply-edits",{result:Promise.resolve(r)}),this.parentCompositeLayer.type==="link-chart"&&await this.parentCompositeLayer.refreshLinkChartCache([...r.addedFeatures.map(a=>a.globalId),...r.updatedFeatures.map(a=>a.globalId),...r.deletedFeatures.map(a=>a.globalId)]),n}loadQueryEngine(t){var n;const e=new $s({geometryType:ue.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ}),s=new Ns({fieldsIndex:this.fieldsIndex.toJSON(),geometryType:ue.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ,featureIdInfo:{type:"object-id",fieldName:this.objectIdField},spatialReference:this.spatialReference.toJSON(),timeInfo:(n=this.timeInfo)==null?void 0:n.toJSON(),featureStore:e});return s.featureStore.addMany(t),s}async refreshCachedQueryEngine(){const t=await this.parentCompositeLayer.dataManager.getData(new oe({where:"1=1",outFields:[H]}),this);this._cachedQueryEngine=this.loadQueryEngine(t)}load(t){return this.addResolvingPromise(this.parent.load(t).then(()=>Xt(this.timeInfo,this.fieldsIndex))),Promise.resolve(this)}async _setupQueryObjects(t,e){var i;const s=oe.from(t),n=s.geometry;if(n&&!((i=n.spatialReference)!=null&&i.isWGS84)&&(await Ie(n.spatialReference,ne),s.geometry=he(n instanceof gt||n instanceof es||n instanceof ts?n:n.extent,ne)),this.parentCompositeLayer.type==="link-chart"&&this._cachedQueryEngine)return{resolvedQuery:s,queryEngine:this._cachedQueryEngine};const r=await this.parentCompositeLayer.dataManager.getData(s,this,e);return{resolvedQuery:s,queryEngine:this.loadQueryEngine(r)}}};function In(t,e,s){var r,i;const n=[["ESRI__AGGREGATION_COUNT",ke],["ESRI__ORIGIN_ID",_e],["ESRI__DESTINATION_ID",$e],["ESRI__LAYOUT_GEOMETRY",Re]];try{for(const a of t)for(const[o,p]of n)a.labelExpression=(r=a.labelExpression)==null?void 0:r.replaceAll(o,p),(i=a.labelExpressionInfo)!=null&&i.expression&&(a.labelExpressionInfo.expression=a.labelExpressionInfo.expression.replaceAll(o,p))}catch(a){ft.getLogger(this).warn("Error updating labelingInfo",a)}return Ts(t,e,s)}h([m(J(V(ns)))],g.prototype,"blendMode",void 0),h([m({readOnly:!0})],g.prototype,"capabilities",null),h([m({readOnly:!0})],g.prototype,"userHasUpdateItemPrivileges",null),h([m({type:Boolean})],g.prototype,"editingEnabled",null),h([m()],g.prototype,"isTable",null),h([m({json:{origins:{"web-scene":{write:!1}},write:ce()}})],g.prototype,"charts",void 0),h([m({readOnly:!0})],g.prototype,"defaultPopupTemplate",null),h([m({type:String,json:{origins:{service:{read:!1}},name:"layerDefinition.definitionExpression",write:{ignoreOrigin:!0}}})],g.prototype,"definitionExpression",void 0),h([m(J(V(rs)))],g.prototype,"displayFilterEnabled",void 0),h([m(J(V(is)))],g.prototype,"displayFilterInfo",void 0),h([m(J(V(as)))],g.prototype,"effect",void 0),h([m()],g.prototype,"elevationInfo",void 0),h([m(J(V(os)))],g.prototype,"featureEffect",void 0),h([m(J(V(ls)))],g.prototype,"featureReduction",null),h([m()],g.prototype,"fields",null),h([m()],g.prototype,"formTemplate",null),h([m()],g.prototype,"geometryType",null),h([m()],g.prototype,"geometryFieldName",null),h([m({readOnly:!0})],g.prototype,"graphicOrigin",null),h([m({type:["entity","relationship"],nonNullable:!0,json:{write:{isRequired:!0,ignoreOrigin:!0}}})],g.prototype,"graphType",void 0),h([m({type:String,nonNullable:!0,json:{write:{isRequired:!0,ignoreOrigin:!0}}})],g.prototype,"graphTypeName",null),h([m()],g.prototype,"hasM",null),h([m()],g.prototype,"hasZ",null),h([m({type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0}}})],g.prototype,"id",void 0),h([m({type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",default:!1,write:{overridePolicy(){return{enabled:!!this.geometryType,alwaysWriteDefaults:!0,ignoreOrigin:!0}}}}})],g.prototype,"labelsVisible",void 0),h([m({type:[pe],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:In,write:ce()}})],g.prototype,"labelingInfo",null),h([m({readOnly:!0,json:{read:!1,write:{writer(t,e){var s;switch((s=this.parentCompositeLayer)==null?void 0:s.type){case"link-chart":e.layerType="LinkChartSubLayer";break;case"knowledge-graph":e.layerType=this.geometryType?"KnowledgeGraphSubLayer":"KnowledgeGraphSubTable"}},isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],g.prototype,"layerType",void 0),h([m(J(V(ps)))],g.prototype,"legendEnabled",void 0),h([m(J(V(ds)))],g.prototype,"maxScale",void 0),h([m(J(V(us)))],g.prototype,"minScale",void 0),h([m()],g.prototype,"objectIdField",void 0),h([m()],g.prototype,"objectType",void 0),h([m(J(V(cs)))],g.prototype,"opacity",void 0),h([m(J(V(ys)))],g.prototype,"orderBy",void 0),h([m({clonable:!1})],g.prototype,"parent",void 0),h([m()],g.prototype,"parentCompositeLayer",void 0),h([m(J(V(hs)))],g.prototype,"popupEnabled",void 0),h([m({type:ms,json:{name:"popupInfo",write:{ignoreOrigin:!0}}})],g.prototype,"popupTemplate",void 0),h([m({type:Number,json:{write:{overridePolicy:ye}}})],g.prototype,"refreshInterval",void 0),h([m({types:fs,json:{name:"layerDefinition.drawingInfo.renderer",write:ce()}})],g.prototype,"renderer",null),h([m()],g.prototype,"source",void 0),h([m()],g.prototype,"spatialReference",null),h([m()],g.prototype,"templates",null),h([m({type:gs,json:{name:"layerDefinition.timeInfo",write:{overridePolicy:ye},origins:{"web-document":{name:"layerDefinition.timeInfo",read:!0,write:{overridePolicy:ye}},"portal-item":{name:"layerDefinition.timeInfo",read:!0,write:{overridePolicy:ye}}}}})],g.prototype,"timeInfo",null),h([m({type:String,json:{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],g.prototype,"title",null),h([bs("title")],g.prototype,"writeTitle",null),h([m({json:{read:!1}})],g.prototype,"type",void 0),h([m(J(V(ws)))],g.prototype,"useViewTime",void 0),h([m({type:Boolean,json:{name:"visibility",write:ce()}})],g.prototype,"visible",void 0),g=h([Ne("esri.layers.knowledgeGraph.KnowledgeGraphSublayer")],g);export{st as A,Wn as C,mn as F,Hn as I,Vn as L,g as N,nt as P,Z as a,at as b,rt as c,it as d,tt as e,Gn as f,Qn as g,Le as o,et as p,zn as r,Un as w};
