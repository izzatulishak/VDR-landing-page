import{_ as r,m as i,b as a,e as m}from"./index-kVF3p0Vu.js";import{m as n}from"./DynamicLayerView3D-DZjTHqlT.js";import{m as l}from"./SublayerPopupHighlightHelper3D-ZXwpVxcL.js";import{y as h}from"./ExportImageParameters-7b-9Fr5J.js";import{i as u}from"./timeSupport-C9e6-hy_.js";import"./SubView3D-Cz9XipMK.js";import"./ImageMaterial.glsl-BaXYutt0.js";import"./TriangleMaterial-C6qgwfLN.js";import"./DefaultLayouts-96isez_o.js";import"./LayerView3D-CmxD1VXZ.js";import"./LayerView-DfQMy9_Y.js";import"./RefreshableLayerView-BMnd8Ivw.js";import"./ImageHighlightHelper3D-CJ1JOcDT.js";import"./floorFilterUtils-DZ5C6FQv.js";import"./sublayerUtils-CLrdRyiA.js";import"./popupUtils-BwLhgpEE.js";import"./utils-BR0j2vLY.js";const g=o=>{const s=o;let e=class extends s{initialize(){this.exportImageParameters=new h({layer:this.layer})}destroy(){this.exportImageParameters.destroy(),this.exportImageParameters=null}get floors(){var t;return((t=this.view)==null?void 0:t.floors)??null}get exportImageVersion(){var t;return(t=this.exportImageParameters)==null||t.commitProperty("version"),this.commitProperty("timeExtent"),this.commitProperty("floors"),(this._get("exportImageVersion")||0)+1}get timeExtent(){var t;return u(this.layer,(t=this.view)==null?void 0:t.timeExtent,this._get("timeExtent"))}canResume(){var t;return!!super.canResume()&&!((t=this.timeExtent)!=null&&t.isEmpty)}};return r([i()],e.prototype,"exportImageParameters",void 0),r([i({readOnly:!0})],e.prototype,"floors",null),r([i({readOnly:!0})],e.prototype,"exportImageVersion",null),r([i()],e.prototype,"layer",void 0),r([i()],e.prototype,"suspended",void 0),r([i({readOnly:!0})],e.prototype,"timeExtent",null),e=r([a("esri.views.layers.MapImageLayerView")],e),e};let p=class extends g(n){constructor(){super(...arguments),this.type="map-image-3d"}initialize(){this._updatingHandles.add(()=>this.exportImageVersion,()=>this._updatingHandles.addPromise(this.refreshDebounced())),this._popupHighlightHelper=new l({view:this.view,layerView:this,updatingHandles:this._updatingHandles}),this.addHandles(m(this._popupHighlightHelper))}fetchPopupFeaturesAtLocation(o,s){return this._popupHighlightHelper.fetchPopupFeaturesAtLocation(o,s)}highlight(o,s){return this._popupHighlightHelper.highlight(o,s)}getFetchOptions(){return{timeExtent:this.timeExtent,scale:this.view.scale}}};p=r([a("esri.views.3d.layers.MapImageLayerView3D")],p);const b=p;export{b as default};
